(this["webpackJsonpmern-pwa-project-template"]=this["webpackJsonpmern-pwa-project-template"]||[]).push([[0],{218:function(e){e.exports=JSON.parse('{"a":""}')},554:function(e,t,a){},555:function(e,t,a){},556:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a(15),c=a.n(s),r=a(39),i=a(95),o=a(83),l=a(23),d=a(37),u=a(6),j=a.n(u),b=a(26),m=a(13),h=a(10),p=a(579),x=a(580),f=a(298),O=a(594),g=a(584),v=a(299),w=a(585),y=a(586),N=a(597),_=a(595),k=a(30),S=a.n(k),C=a(598),E=a(583),R=a(78),D=a.n(R),L=a(163),I=a.n(L),U=a(169),T=a.n(U),F=a(170),P=a.n(F),A=a(332),q=a(65),z=a.n(q),B="USER_LOGIN_SUCCESS",M="USER_LOGIN_FAILED",W="USER_LOGOUT",G="USER_UPDATE_SUCCESS",H="USER_UPDATE_FAILED",Y="FRIEND_REQUEST_SUCCESS",J="FRIEND_REQUEST_ERROR",Q="GET_FRIENDS_SUCCESS",K="GET_FRIENDS_ERROR",$="GET_CHAT_MESSAGE",V="GET_CHAT_MESSAGE_ERROR",X=function(e){return function(){var t=Object(m.a)(j.a.mark((function t(a){var n,s;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.a.post("/api/v1/user",e);case 3:n=t.sent,s=n.data,localStorage.setItem("user",JSON.stringify(s.user)),a({type:B,payload:s.user}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),a({type:M,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},Z=function(e){return function(){var t=Object(m.a)(j.a.mark((function t(a){var n,s;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.a.get("/api/v1/user?search=".concat(e));case 3:n=t.sent,s=n.data,a({type:Y,payload:s.friendRequests}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),a({type:J,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},ee=function(e){return function(){var t=Object(m.a)(j.a.mark((function t(a){var n,s;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.a.get("/api/v1/user?search=".concat(e));case 3:n=t.sent,s=n.data,a({type:Q,payload:s.friends}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),a({type:K,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},te=function(){return function(){var e=Object(m.a)(j.a.mark((function e(t){var a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.get("/api/v1/messages");case 3:a=e.sent,n=a.data,t({type:$,payload:n.messages}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t({type:V,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()};var ae=function(e,t){var a=Object(n.useState)(e),s=Object(h.a)(a,2),c=s[0],r=s[1];return Object(n.useEffect)((function(){var a=setTimeout((function(){r(e)}),t);return function(){clearTimeout(a)}}),[e,t]),c},ne=a(1),se=function(){var e,t,a=Object(i.useToasts)().addToast,s=Object(r.c)((function(e){return e.userLogin})),c=s.user,o=s.error,u=Object(l.g)(),k=Object(r.b)(),R=Object(n.useState)(""),L=Object(h.a)(R,2),U=L[0],F=L[1],q=Object(n.useState)([]),B=Object(h.a)(q,2),M=B[0],W=B[1],G=Object(n.useState)(!1),H=Object(h.a)(G,2),Y=H[0],J=H[1],Q=Object(n.useState)(!0),K=Object(h.a)(Q,2),$=K[0],V=K[1],Z=Object(n.useRef)(0),ee=Object(n.useState)(!0),te=Object(h.a)(ee,2),se=te[0],ce=te[1],re=Object(n.useState)(!0),ie=Object(h.a)(re,2),oe=ie[0],le=ie[1],de=ae(U,1e3),ue=Object(n.useState)(!0),je=Object(h.a)(ue,2),be=je[0],me=je[1],he=Object(A.a)(),pe=he.register,xe=he.handleSubmit,fe=(he.watch,he.formState.errors),Oe=function(e){if(se)k(X(e)),u.push("/chat");else if(e.password===e.confirmPassword){var t;e.photo=null!==(t=M[0])&&void 0!==t?t:"",k(X(e)),u.push("/chat")}},ge=function(){var e=Object(m.a)(j.a.mark((function e(t){var a,n,s,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=t.target.files,n=new FormData,s=0;s<a.length;s++)n.append("uploads",a[s]);return e.prev=3,e.next=6,S.a.post("/api/v1/upload",n);case 6:c=e.sent,c.data.map((function(e){return W((function(t){return[].concat(Object(b.a)(t),[e.filePath])}))})),J(!0),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),console.log(e.t0.response);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}(),ve=function(){var e=Object(m.a)(j.a.mark((function e(t){var a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.get("/api/v1/user?search=".concat(t));case 3:return a=e.sent,n=a.data,e.abrupt("return",n);case 8:return e.prev=8,e.t0=e.catch(0),console.log(e.t0.response),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),we=function(){var e=Object(m.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.split("/uploads/")[1],console.log({id:t,uploadId:a}),e.next=4,S.a.delete("/api/v1/upload/".concat(a));case 4:W(M.filter((function(e){return e!==t}))),J(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){(c&&(null===c||void 0===c?void 0:c.isLoggedIn)&&u.push("/chat"),de)?function(){var e=Object(m.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve(de);case 3:(t=e.sent).isSuccess&&(console.log(t.user.photo),W([t.user.photo])),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()():W([]);window.addEventListener("resize",(function(){V(window.innerWidth>991)})),V(window.innerWidth>991)}),[u,c,de,o,a]),Object(ne.jsxs)("div",{className:"bg-primary login__screen",children:[se?Object(ne.jsxs)(p.a,{children:[Object(ne.jsx)("h3",{className:"text-white pt-5 text-center",children:"Chat-Buddy"}),Object(ne.jsxs)(x.a,{children:[Object(ne.jsx)(f.a,{lg:4}),Object(ne.jsx)(f.a,{xs:12,md:12,lg:4,children:Object(ne.jsxs)(O.a,{onSubmit:xe(Oe),className:"my-5",children:[Object(ne.jsxs)("div",{className:"d-flex justify-content-center align-items-center position-relative photo",children:[Object(ne.jsx)(C.a,{alt:U,src:null!==(e=M[0])&&void 0!==e?e:"/logo.gif",style:{height:150,width:150},className:"shadow-lg border border-dark"}),M[0]&&Object(ne.jsx)(E.a,{className:"position-absolute delete__icon",onClick:function(){return we(M[0])},children:Object(ne.jsx)(D.a,{className:"text-white"})})]}),Object(ne.jsxs)(O.a.Group,{className:"mb-3",controlId:"email",children:[Object(ne.jsx)(O.a.Label,{className:"text-white",children:"Email address"}),Object(ne.jsx)(O.a.Control,Object(d.a)(Object(d.a)({value:U},pe("email",{required:!0})),{},{onChange:function(e){return F(e.target.value)},type:"email",placeholder:"Enter email",htmlFor:"email"})),fe.email&&Object(ne.jsx)("p",{className:"text-danger py-1",children:"Email is required"})]}),Object(ne.jsx)(O.a.Label,{className:"text-white",children:"Password"}),Object(ne.jsxs)(g.a,{className:"mb-3",children:[Object(ne.jsx)(v.a,Object(d.a)(Object(d.a)({placeholder:"User Password","aria-label":"User Password","aria-describedby":"basic-addon2"},pe("password",{required:!0})),{},{type:oe?"password":"text",htmlFor:"email"})),Object(ne.jsx)(g.a.Text,{id:"basic-addon2",style:{cursor:"pointer"},onClick:function(){return le(!oe)},children:oe?Object(ne.jsx)(T.a,{}):Object(ne.jsx)(P.a,{})})]}),fe.password&&Object(ne.jsx)("p",{className:"text-danger pb-1",children:"Password is required"}),!c&&o&&be&&Object(ne.jsxs)(w.a,{variant:"danger",className:"py-2 text-center d-flex justify-content-between align-items-center",children:[o," ",Object(ne.jsx)(z.a,{onClick:function(){return me(!1)},className:"text-white cursor__pointer"})]}),Object(ne.jsx)(y.a,{variant:"outline-secondary w-100",type:"submit",children:"Login"}),Object(ne.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(ne.jsx)("p",{className:"text-white py-2",children:"Not registered? "}),Object(ne.jsxs)(y.a,{className:"text-white py-2",onClick:function(){return ce(!se)},children:["Register"," "]})]})]})}),Object(ne.jsx)(f.a,{lg:4})]})]}):Object(ne.jsxs)(p.a,{className:"",children:[Object(ne.jsx)("h3",{className:"text-white pt-5 text-center",children:"Chat-Buddy"}),Object(ne.jsxs)(x.a,{children:[Object(ne.jsx)(f.a,{lg:4}),Object(ne.jsx)(f.a,{xs:12,md:12,lg:4,children:Object(ne.jsxs)(O.a,{onSubmit:xe(Oe),className:"my-5",children:[Object(ne.jsxs)("div",{className:"d-flex justify-content-center align-items-center position-relative photo",children:[Object(ne.jsx)(C.a,{src:null!==(t=M[0])&&void 0!==t?t:"/logo.gif",style:{height:150,width:150},className:"shadow-lg border border-dark"}),M[0]&&Object(ne.jsx)(E.a,{className:"position-absolute delete__icon",onClick:function(){return we(M[0])},children:Object(ne.jsx)(D.a,{className:"text-white"})})]}),Object(ne.jsxs)(O.a.Group,{className:"mb-3",controlId:"name",children:[Object(ne.jsx)(O.a.Label,{className:"text-white",children:"User Name"}),Object(ne.jsx)(O.a.Control,Object(d.a)(Object(d.a)({},pe("name",{required:!0})),{},{type:"text",placeholder:"Enter Name",htmlFor:"name"})),fe.name&&Object(ne.jsx)("p",{className:"text-danger py-1",children:"Name is required"})]}),Object(ne.jsxs)(O.a.Group,{className:"mb-3",controlId:"email",children:[Object(ne.jsx)(O.a.Label,{className:"text-white",children:"Email address"}),Object(ne.jsx)(O.a.Control,Object(d.a)(Object(d.a)({},pe("email",{required:!0})),{},{type:"email",placeholder:"Enter email",htmlFor:"email"})),fe.email&&Object(ne.jsx)("p",{className:"text-danger py-1",children:"Email is required"})]}),!Y&&Object(ne.jsxs)(O.a.Group,{className:"mb-3",controlId:"photo",children:[Object(ne.jsx)(O.a.Label,{className:"text-white",children:"Upload Your Photo"}),Object(ne.jsx)("div",{className:"input-group mb-3",children:Object(ne.jsx)("input",{type:"file",className:"form-control",accept:"image/*",onChange:ge,placeholder:"Input Photos",id:"inputGroupFile02"})})]}),Object(ne.jsx)(O.a.Label,{className:"text-white",children:"Password"}),Object(ne.jsxs)(g.a,{className:"mb-1",children:[Object(ne.jsx)(v.a,Object(d.a)(Object(d.a)({placeholder:"Recipient's username","aria-label":"Recipient's username","aria-describedby":"basic-addon2"},pe("password",{required:!0})),{},{type:oe?"password":"text",htmlFor:"email"})),Object(ne.jsx)(g.a.Text,{id:"basic-addon2",style:{cursor:"pointer"},onClick:function(){return le(!oe)},children:oe?Object(ne.jsx)(T.a,{}):Object(ne.jsx)(P.a,{})})]}),fe.password&&Object(ne.jsx)("p",{className:"text-danger py-1",children:"Password is required"}),Object(ne.jsx)(O.a.Label,{className:"text-white",children:"Confirm Password"}),Object(ne.jsxs)(g.a,{className:"mb-1",children:[Object(ne.jsx)(v.a,Object(d.a)(Object(d.a)({placeholder:"Recipient's username","aria-label":"Recipient's username","aria-describedby":"basic-addon2"},pe("confirmPassword",{required:!0})),{},{type:oe?"password":"text",htmlFor:"email"})),Object(ne.jsx)(g.a.Text,{id:"basic-addon2",style:{cursor:"pointer"},onClick:function(){return le(!oe)},children:oe?Object(ne.jsx)(T.a,{}):Object(ne.jsx)(P.a,{})})]}),fe.confirmPassword&&Object(ne.jsx)("p",{className:"text-danger py-1",children:"Confirm Password is required"}),Object(ne.jsx)(y.a,{variant:"outline-secondary w-100",type:"submit",children:"Register"}),Object(ne.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(ne.jsx)("p",{className:"text-white py-2",children:"Have account already? "}),Object(ne.jsxs)(y.a,{className:"text-white py-2",onClick:function(){return ce(!se)},children:["Login"," "]})]})]})}),Object(ne.jsx)(f.a,{lg:4})]})]}),$?Object(ne.jsx)(N.a,{className:"nav__bar fixed-bottom",ref:Z,expand:"lg",children:Object(ne.jsxs)(p.a,{className:"d-flex justify-content-between align-items-center",children:[Object(ne.jsxs)(_.a,{className:" align-items-center py-2 text-white",children:["Copyright ",Object(ne.jsx)(I.a,{className:"me-2"})," ",(new Date).getFullYear()," ","Chat-Buddy. All rights reserved."]}),Object(ne.jsx)(_.a,{className:"align-items-center text-white",children:"Designed & Developed By Sazzad Bin Anwar"})]})}):Object(ne.jsx)(N.a,{className:"nav__bar",ref:Z,expand:"lg",children:Object(ne.jsxs)(p.a,{children:[Object(ne.jsxs)(_.a,{className:"py-2 text-white",children:["Copyright \xa9 ",(new Date).getFullYear()," All rights reserves to Chat-Buddy"]}),Object(ne.jsx)(_.a,{className:"align-items-center pb-4 text-white",children:"Designed & Developed By Sazzad Bin Anwar"})]})})]})},ce=function(){return Object(ne.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)"},children:Object(ne.jsx)("h4",{children:"404 | Page Not Found"})})},re=a(333),ie=function(e){var t=e.children,a=Object(re.a)(e,["children"]),n=Object(r.c)((function(e){return e.userLogin})).user;return Object(ne.jsx)(l.b,Object(d.a)(Object(d.a)({},a),{},{render:function(e){var a=e.location;return n&&n.isLoggedIn?t:Object(ne.jsx)(l.a,{to:{pathname:"/",state:{from:a}}})}}))},oe=a(592),le=a(326),de=a.n(le),ue=a(593),je=a(599),be=a(589),me=a(590),he=a(558),pe=a(596),xe=a(591),fe=a(588),Oe=a(587),ge=a(86),ve=a.n(ge),we=a(303),ye=a(331),Ne=a(324),_e=a.n(Ne),ke=a(222),Se=a.n(ke),Ce=a(328),Ee=a.n(Ce),Re=a(124),De=a.n(Re),Le=a(323),Ie=a.n(Le),Ue=a(327),Te=a.n(Ue),Fe=a(221),Pe=a.n(Fe),Ae=a(325),qe=a.n(Ae),ze=a(321),Be=a.n(ze),Me=a(322),We=a.n(Me),Ge=a(125),He=a.n(Ge),Ye=a(216),Je=a(220),Qe=a.n(Je),Ke=a(317),$e=a.n(Ke),Ve=a(318),Xe=a.n(Ve),Ze=a(123),et=a.n(Ze),tt=a(316),at=a.n(tt),nt=a(14),st=a.n(nt),ct=a(219),rt=a.n(ct),it=a(217),ot=a.n(it),lt=a(164),dt=a.n(lt),ut=a(218),jt=function(e){var t=e.fileData,a=e.setShow,n=e.setChatImage,s=e.fileLength;return".png"===st.a.extname(t)||".jpg"===st.a.extname(t)||".jpeg"===st.a.extname(t)||".gif"===st.a.extname(t)?Object(ne.jsx)(f.a,{xs:12,md:1===s?12:2===s?6:4,className:"g-2",children:Object(ne.jsxs)(Oe.a,{elevation:5,className:"mb-0 img__card",style:{cursor:"pointer",position:"relative",height:200,width:200},children:[Object(ne.jsx)("img",{src:t,height:200,width:"auto",className:"position-absolute",alt:"upload-".concat(t),style:{right:0,top:0,bottom:0,left:0}}),Object(ne.jsx)("div",{className:"position-absolute start-0 top-0 end-0 bottom-0 download__btn",children:Object(ne.jsx)(rt.a,{className:"bg-white rounded-circle position-absolute",style:{top:"50%",left:"50%",transform:"translate(-50%,-50%)",cursor:"pointer",zIndex:1},onClick:function(){return ot.a.saveAs("".concat(ut.a).concat(t),"image.".concat(st.a.extname(t)))}})}),Object(ne.jsx)("div",{className:"position-absolute start-0 top-0 end-0 bottom-0 download__btn",children:Object(ne.jsx)(at.a,{className:"bg-white rounded-circle position-absolute",style:{top:0,right:0,cursor:"pointer"},onClick:function(){a(!0),n(t)}})})]})},t):".mp4"===st.a.extname(t)||".mov"===st.a.extname(t)||".wmv"===st.a.extname(t)||".flv"===st.a.extname(t)||".webm"===st.a.extname(t)||".mkv"===st.a.extname(t)?Object(ne.jsx)(f.a,{xs:12,className:"g-2",children:Object(ne.jsx)(Oe.a,{elevation:5,className:"mb-0 img__card",style:{cursor:"pointer",position:"relative",height:400,width:400},children:Object(ne.jsx)("video",{controls:!0,width:"100%",height:"400",children:Object(ne.jsx)("source",{src:t,type:"video/".concat(st.a.extname(t).split(".")[1])})})})},t):".mp3"===st.a.extname(t)||".ogg"===st.a.extname(t)||".mpeg"===st.a.extname(t)?Object(ne.jsx)(f.a,{xs:12,className:"g-2",children:Object(ne.jsx)("audio",{controls:!0,children:Object(ne.jsx)("source",{src:t,type:"audio/".concat(st.a.extname(t).split(".")[1])})})},t):Object(ne.jsx)(f.a,{xs:12,className:"g-2",children:Object(ne.jsx)(Oe.a,{elevation:5,className:"mb-0 py-1 px-2 rounded",style:{backgroundColor:"#616161"},children:Object(ne.jsxs)("div",{className:"d-flex justify-content-between align-items-center",style:{width:200},children:[Object(ne.jsx)(dt.a,{className:"text-white"}),Object(ne.jsx)("span",{className:"col-4 text-truncate text-white",children:t.split("/")[2]}),Object(ne.jsx)("span",{className:"text-white",children:st.a.extname(t)}),Object(ne.jsx)(E.a,{children:Object(ne.jsx)(rt.a,{className:"text-white",onClick:function(){return ot.a.saveAs("".concat(ut.a).concat(t),"file.".concat(st.a.extname(t)))}})})]})})},t)},bt=function(e){var t=e.messageDetails,a=e.user,s=e.roomUser,c=e.editMsg,r=e.deleteMsg,i=e.replyMsg,o=Object(n.useState)(!1),l=Object(h.a)(o,2),d=l[0],u=l[1],j=Object(n.useState)(null),b=Object(h.a)(j,2),m=b[0],p=b[1],f=Object(n.useState)(""),O=Object(h.a)(f,2),g=O[0],v=O[1],w=Boolean(m),y=function(e){p(e.currentTarget)},N=function(){p(null)};return a.email!==t.from&&s.email===t.from&&a.email===t.to?Object(ne.jsxs)("div",{className:"d-flex my-3 chat__buddy",style:{marginRight:"20%"},children:[Object(ne.jsx)(C.a,{alt:s.name,src:s.photo,style:{width:32,height:32}}),Object(ne.jsxs)("div",{className:"d-flex flex-column align-items-start",children:[Object(ne.jsxs)("div",{className:"d-flex",children:[t.message&&Object(ne.jsxs)("div",{className:"chat__card chat__person ms-0 p-2",children:[t.repliedOf&&Object(ne.jsxs)(Oe.a,{body:!0,className:"chat__card chat__person p-2 chat__reply text-white rounded-top",children:["".concat(t.repliedOf.length>200?t.repliedOf.substring(0,200):t.repliedOf,"...")," ",Object(ne.jsx)(et.a,{})]}),Object(ne.jsx)(Oe.a,{body:!0,className:"chat__card chat__person p-2",style:{width:"100%"},children:t.message.startsWith("http")?Object(ne.jsx)(Ye.ReactTinyLink,{cardSize:"small",showGraphic:!0,maxLine:2,minLine:1,proxyUrl:"https://corsanywhere.herokuapp.com",url:t.message}):t.message})]}),t.file&&Object(ne.jsx)(x.a,{className:"ms-2",children:t.file.map((function(e){return Object(ne.jsx)(jt,{fileData:e,setShow:u,setChatImage:v},e)}))}),Object(ne.jsx)(E.a,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:y,className:"ms-2",children:Object(ne.jsx)(Qe.a,{})}),Object(ne.jsx)(ue.a,{id:"long-menu",anchorEl:m,keepMounted:!0,open:w,onClose:N,PaperProps:{style:{maxHeight:216}},children:Object(ne.jsx)(je.a,{onClick:function(){N(),i(t._id)},children:Object(ne.jsx)(et.a,{})})})]}),Object(ne.jsx)("p",{className:"text-white ms-2 mt-0 pt-0 last__seen",children:ve()(t.updatedAt).fromNow()})]})]}):a.email===t.from&&s.email===t.to?Object(ne.jsxs)("div",{className:"d-flex flex-column justify-content-end align-items-end my-3",style:{marginLeft:"20%"},children:[Object(ne.jsxs)("div",{className:"d-flex my__chat text-right justify-content-end",children:[Object(ne.jsxs)("div",{className:"chat__card me-3 d-flex justify-content-center align-items-center",children:[Object(ne.jsx)(E.a,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:y,className:"me-3",children:Object(ne.jsx)(Qe.a,{})}),Object(ne.jsxs)(ue.a,{id:"long-menu",anchorEl:m,keepMounted:!0,open:w,onClose:N,PaperProps:{style:{maxHeight:216}},children:[Object(ne.jsx)(je.a,{onClick:function(){N(),r(t._id)},children:Object(ne.jsx)($e.a,{})}),t.message&&Object(ne.jsx)(je.a,{onClick:function(){N(),c(t._id)},children:Object(ne.jsx)(Xe.a,{})}),Object(ne.jsx)(je.a,{onClick:function(){N(),i(t._id)},children:Object(ne.jsx)(et.a,{})})]}),Object(ne.jsxs)("div",{className:"d-flex flex-column justify-content-end align-items-center",children:[t.message&&Object(ne.jsxs)("div",{className:"chat__person p-2",children:[t.repliedOf&&Object(ne.jsxs)(Oe.a,{body:!0,className:"chat__person p-2 chat__reply text-white",children:["".concat(t.repliedOf.substring(0,200),"...")," ",Object(ne.jsx)(et.a,{})]}),Object(ne.jsx)(Oe.a,{body:!0,className:"chat__person p-2",style:{width:"100%"},children:t.message.startsWith("http")?Object(ne.jsx)(Ye.ReactTinyLink,{cardSize:"small",showGraphic:!0,maxLine:2,minLine:1,proxyUrl:"https://corsanywhere.herokuapp.com",url:t.message}):t.message})]}),t.file&&Object(ne.jsx)(x.a,{children:t.file.map((function(e){return Object(ne.jsx)(jt,{fileData:e,setShow:u,setChatImage:v,fileLength:t.file.length},e)}))})]})]}),Object(ne.jsx)(C.a,{alt:a.name,src:a.photo,style:{width:32,height:32,marginRight:10}})]}),Object(ne.jsxs)("p",{className:"text-white mt-1 mb-0 me-3 pe-5 last__seen",children:[t.isSeen&&Object(ne.jsx)("i",{className:"me-1",children:"seen"}),ve()(t.updatedAt).fromNow()]}),Object(ne.jsxs)(oe.a,{show:d,onHide:function(){return u(!d)},fullscreen:"md-down",centered:!0,className:"shadow-lg w-100",children:[Object(ne.jsx)("img",{alt:g,src:g}),Object(ne.jsx)(z.a,{className:"bg-white rounded-circle position-absolute",style:{top:"-10px",right:"-10px",cursor:"pointer"},onClick:function(){return u(!d)}})]})]}):(s.email,t.to,null)},mt=a(320),ht=a.n(mt),pt=function(e){var t=e.userInfo,a=e.messages,s=e.findRoomUser,c=e.setReplyMsgDetails,i=e.setDisplayMessages,o=e.showMobileChat,l=Object(r.b)(),d=Object(n.useState)(null===a||void 0===a?void 0:a.filter((function(e){return e.from===(null===t||void 0===t?void 0:t.email)&&!e.isSeen})).length),u=Object(h.a)(d,2),b=u[0];u[1];return Object(ne.jsxs)(Oe.a,{elevation:10,body:!0,className:(null===t||void 0===t?void 0:t.isActive)?"bg__green p-2 d-flex align-items-center mb-3 justify-content-between":"bg-dark p-2 d-flex align-items-center mb-3 justify-content-between",style:{cursor:"pointer"},onClick:Object(m.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(null===t||void 0===t?void 0:t.email),c(""),i(!!o),e.next=5,S.a.get("/api/v1/messages?messageSeen=".concat(null===t||void 0===t?void 0:t.email));case 5:l(te());case 6:case"end":return e.stop()}}),e)}))),children:[Object(ne.jsxs)("div",{className:"d-flex align-items-center",children:[Object(ne.jsx)(C.a,{alt:null===t||void 0===t?void 0:t.name,src:null===t||void 0===t?void 0:t.photo,className:"shadow-lg border"}),Object(ne.jsxs)("div",{className:"ps-3 ",children:[Object(ne.jsx)("p",{className:"text-white my-0 fs-6 user__name_list",children:null===t||void 0===t?void 0:t.name}),Object(ne.jsx)("p",{className:"text-white my-0 last__seen",children:(null===t||void 0===t?void 0:t.isActive)?"Online":"Active ".concat(ve()(null===t||void 0===t?void 0:t.updatedAt).fromNow())})]})]}),b?Object(ne.jsx)(fe.a,{badgeContent:b,color:"primary",children:Object(ne.jsx)(ht.a,{className:"ms-5 text-white"})}):null]})},xt=function(e){var t=e.fileData,a=e.removeFile;return".png"===st.a.extname(t)||".jpg"===st.a.extname(t)||".jpeg"===st.a.extname(t)||".gif"===st.a.extname(t)?Object(ne.jsx)(f.a,{xs:12,md:6,className:"g-2",children:Object(ne.jsxs)(Oe.a,{elevation:5,className:"mb-0 img__card",style:{position:"relative",height:200,width:"100%"},children:[Object(ne.jsx)("img",{src:t,height:200,width:"auto",className:"position-absolute",alt:"upload-".concat(t),style:{right:0,top:0,bottom:0,left:0}}),Object(ne.jsx)(D.a,{className:"position-absolute bg-white text-dark",style:{right:0,top:0,cursor:"pointer"},onClick:function(){return a(t)}})]})},t):".mp4"===st.a.extname(t)||".mov"===st.a.extname(t)||".wmv"===st.a.extname(t)||".flv"===st.a.extname(t)||".webm"===st.a.extname(t)||".mkv"===st.a.extname(t)?Object(ne.jsx)(f.a,{xs:12,className:"g-2",children:Object(ne.jsxs)(Oe.a,{elevation:5,className:"mb-0 img__card",style:{position:"relative"},children:[Object(ne.jsx)("video",{controls:!0,width:"100%",height:"400",children:Object(ne.jsx)("source",{src:t,type:"video/".concat(st.a.extname(t).split(".")[1])})}),Object(ne.jsx)(D.a,{className:"position-absolute bg-white text-dark",style:{right:0,top:0,cursor:"pointer",zIndex:1},onClick:function(){return a(t)}})]})},t):".mp3"===st.a.extname(t)||".ogg"===st.a.extname(t)||".mpeg"===st.a.extname(t)?Object(ne.jsx)(f.a,{xs:12,className:"g-2",children:Object(ne.jsxs)("div",{className:"position-relative",children:[Object(ne.jsx)("audio",{controls:!0,children:Object(ne.jsx)("source",{src:t,type:"audio/".concat(st.a.extname(t).split(".")[1])})}),Object(ne.jsx)(D.a,{className:"position-absolute bg-white text-dark",style:{right:0,top:0,cursor:"pointer"},onClick:function(){return a(t)}})]})},t):Object(ne.jsx)(f.a,{xs:12,md:6,className:"g-2",children:Object(ne.jsx)(Oe.a,{elevation:5,className:"mb-0 py-3 px-3 rounded position-relative",style:{backgroundColor:"#616161"},children:Object(ne.jsxs)("div",{className:"d-flex justify-content-between align-items-center",style:{width:200},children:[Object(ne.jsx)(dt.a,{className:"text-white"}),Object(ne.jsx)("span",{className:"col-4 text-truncate text-white",children:t.split("/")[2]}),Object(ne.jsx)("span",{className:"text-white",children:st.a.extname(t)}),Object(ne.jsx)(D.a,{className:"position-absolute",style:{right:0,top:0,cursor:"pointer"},onClick:function(){return a(t)}})]})})},t)},ft=function(){var e=Object(r.c)((function(e){return e.userLogin})).user,t=Object(r.c)((function(e){return e.friends})).friends,a=Object(r.c)((function(e){return e.friendRequests})).friendRequest,s=Object(r.c)((function(e){return e.chat})).chat,c=Object(r.b)(),d=Object(l.g)(),u=Object(n.useState)(t&&t),w=Object(h.a)(u,2),k=w[0],R=w[1],D=Object(i.useToasts)().addToast,L=Object(n.useState)(0),U=Object(h.a)(L,2),T=U[0],F=U[1],P=Object(n.useState)(!0),A=Object(h.a)(P,2),q=A[0],B=A[1],M=Object(n.useState)({}),G=Object(h.a)(M,2),H=G[0],Y=G[1],J=Object(n.useState)(s&&s),Q=Object(h.a)(J,2),K=Q[0],$=Q[1],V=Object(n.useState)(""),X=Object(h.a)(V,2),se=X[0],ce=X[1],re=Object(n.useState)(""),ie=Object(h.a)(re,2),le=ie[0],ge=ie[1],Ne=Object(n.useState)([]),ke=Object(h.a)(Ne,2),Ce=ke[0],Re=ke[1],Le=Object(n.useState)([]),Ue=Object(h.a)(Le,2),Fe=Ue[0],Ae=Ue[1],ze=Object(n.useState)([]),Me=Object(h.a)(ze,2),Ge=(Me[0],Me[1],Object(n.useState)(!1)),Ye=Object(h.a)(Ge,2),Je=Ye[0],Qe=Ye[1],Ke=Object(n.useState)(),$e=Object(h.a)(Ke,2),Ve=$e[0],Xe=$e[1],Ze=Object(n.useState)(!1),et=Object(h.a)(Ze,2),tt=et[0],at=et[1],nt=Object(n.useState)(null),st=Object(h.a)(nt,2),ct=st[0],rt=st[1],it=Object(n.useState)(""),ot=Object(h.a)(it,2),lt=ot[0],dt=ot[1],ut=Object(n.useState)(!1),jt=Object(h.a)(ut,2),mt=jt[0],ht=jt[1],ft=Object(n.useState)(!1),Ot=Object(h.a)(ft,2),gt=Ot[0],vt=Ot[1],wt=Object(n.useState)(!1),yt=Object(h.a)(wt,2),Nt=yt[0],_t=yt[1],kt=Object(n.useState)(!0),St=Object(h.a)(kt,2),Ct=St[0],Et=St[1],Rt=ae(le,1e3),Dt=Object(n.useRef)(0),Lt=Object(n.useRef)(0),It=Object(n.useRef)(0),Ut=Object(n.useRef)(null),Tt=Object(n.useState)(null),Ft=Object(h.a)(Tt,2),Pt=Ft[0],At=Ft[1],qt=Boolean(Pt),zt=function(){At(null)},Bt=Object(n.useRef)(null),Mt=function(){var e=Object(m.a)(j.a.mark((function e(t){var a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.get("/api/v1/user?search=".concat(t));case 3:return a=e.sent,n=a.data,e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.response);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){return Bt.current=Object(we.io)("/"),Bt.current.on("user-joined",(function(a){var n=a.allUsers.filter((function(a){return a.email!==e.email&&t&&(null===t||void 0===t?void 0:t.find((function(e){return e.email===a.email})))}));R(n),a.joinedUser&&a.joinedUser.email!==e.email&&(null===e||void 0===e?void 0:e.isLoggedIn)&&t&&(null===t||void 0===t?void 0:t.find((function(e){return e.email===a.email})))?(D("".concat(a.joinedUser.name," is active"),{appearance:"info",autoDismiss:!0}),null!==H&&(null===H||void 0===H?void 0:H.email)===a.joinedUser.email&&Y(a.joinedUser)):a.leavingUser&&a.leavingUser.email!==e.email&&(null===e||void 0===e?void 0:e.isLoggedIn)&&Y()})),Bt.current.emit("user-login",e),Bt.current.on("friend-request",(function(t){var a=t.requestReceiver,n=t.requestSender;t.message,t.requestSenderUser;a!==n&&c(Z(e.email))})),Bt.current.on("friend-list",(function(t){t.requestId;t.userId===e._id&&(c(ee(e.email)),c(Z(e.email)))})),function(){Bt.current.off("user-joined",(function(e){})),Bt.current.off("room-user-details",(function(e){})),Bt.current.off("friend-request",(function(){})),Bt.current.off("friend-list",(function(){})),window.removeEventListener("resize",(function(){}))}}),[D,e,d,ct,q,H,Fe,c,t]),Object(n.useEffect)((function(){var t=new Audio("/msg_sound.mp3");return Bt.current.on("removeMsgFromChat",function(){var e=Object(m.a)(j.a.mark((function e(t){var a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.get("/api/v1/messages");case 3:a=e.sent,n=a.data,$(n.messages),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()),Bt.current.on("chat-message",function(){var a=Object(m.a)(j.a.mark((function a(n){return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n.from!==e.email&&q&&t.play(),n.from!==e.email&&n.to!==e.email||c(te());case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()),function(){Bt.current.off("chat-message",(function(e){})),Bt.current.off("removeMsgFromChat",(function(e){}))}}),[c,K,q,e.email]),Object(n.useEffect)((function(){Rt?(_t(!0),Et(!0),function(){var e=Object(m.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Mt(Rt);case 3:(t=e.sent).isSuccess?(Xe(t.user),_t(!1)):(_t(!1),Et(!1)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()()):(_t(!1),Xe(""));e||(null===e||void 0===e?void 0:e.isLoggedIn)||d.push("/"),window.innerWidth<991&&ht(!0),window.addEventListener("resize",(function(){window.innerWidth<991&&ht(!0)})),null!==ct&&(ct.message||ct.file)&&Ut.current.focus(),c(Z(e.email)),c(ee(e.email)),c(te())}),[Rt,c,d,ct,e]);var Wt=function(e){Y(k.filter((function(t){return t.email===e}))[0])},Gt=function(){var t=Object(m.a)(j.a.mark((function t(a){var n,s,r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n={_id:lt,user:e._id,from:e.email,file:Ce,repliedOf:(null===ct||void 0===ct?void 0:ct.message)?null===ct||void 0===ct?void 0:ct.message:(null===ct||void 0===ct?void 0:ct.file)?null===ct||void 0===ct?void 0:ct.file[0]:"",to:null===H||void 0===H?void 0:H.email,message:se,sendAt:Date.now()},!(se&&"Enter"===a.key||se||Ce)){t.next=17;break}return ce(""),t.prev=4,t.next=7,S.a.post("/api/v1/messages",n);case 7:s=t.sent,(r=s.data).message&&(c(te()),Bt.current.emit("message",r.message),Qe(!1),Re([]),rt({}),dt("")),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(4),console.log(t.t0);case 15:t.next=18;break;case 17:D("Please Write something",{appearance:"info",autoDismiss:!0});case 18:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(e){return t.apply(this,arguments)}}(),Ht=function(){var e=Object(m.a)(j.a.mark((function e(t){var a,n,s,c,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=t.target.files,n=new FormData,s=0;s<a.length;s++)n.append("uploads",a[s]);return e.prev=3,e.next=6,S.a.post("/api/v1/upload",n);case 6:c=e.sent,(r=c.data).map((function(e){return Re((function(t){return[].concat(Object(b.a)(t),[e.filePath])}))})),r.length?Qe(!0):Qe(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),console.log(e.t0.response);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}(),Yt=function(){var e=Object(m.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.split("/uploads/")[1],e.next=3,S.a.delete("/api/v1/upload/".concat(a));case 3:Re(Ce.filter((function(e){return e!==t}))),1===Ce.length?Qe(!1):Qe(!0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Jt=function(){Ce.length&&(Ce.map((function(e){return Yt(e)})),Ce.length-1>0&&D("Remove ".concat(Ce.length-1," files"),{autoDismiss:!0,appearance:"info"})),Ce.length||Qe(!Je)},Qt=function(e){Bt.current.emit("messageDelete",e)},Kt=function(e){dt(e),ce(s&&s.filter((function(t){return t._id===e}))[0].message),c(te())},$t=function(e){rt(s&&s.filter((function(t){return t._id===e}))[0])},Vt=function(){var t=Object(m.a)(j.a.mark((function t(a){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Bt.current.emit("friend-request-send",{friendId:a,myId:e._id});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Xt=function(){var t=Object(m.a)(j.a.mark((function t(a){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Bt.current.emit("friend-request-declined",{requestId:a,userId:e._id}),Fe&&Ae(Fe.filter((function(e){return e._id!==a}))),c(Z(e.email));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Zt=function(){var t=Object(m.a)(j.a.mark((function t(a){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Bt.current.emit("friend-request-accepted",{requestId:a,userId:e._id}),console.log("clicked");case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(ne.jsxs)("div",{children:[Object(ne.jsx)(N.a,{bg:"dark",className:"nav__bar",ref:Dt,expand:"lg",children:Object(ne.jsxs)(p.a,{fluid:"lg",children:[Object(ne.jsx)(o.b,{to:"/",children:Object(ne.jsxs)(N.a.Brand,{className:"text-white align-items-center",children:[Object(ne.jsx)("img",{className:"app__logo me-2",height:"30px",src:"/logo.gif",alt:"logo"}),Object(ne.jsx)("span",{className:"h4",children:"Chat-Buddy"})]})}),Object(ne.jsxs)(_.a,{className:"ms-auto align-items-center",children:[Object(ne.jsx)(_.a.Link,{className:"text-white fs-5",children:q?Object(ne.jsx)(E.a,{onClick:function(){return B(!1)},size:"small",sx:{ml:2},children:Object(ne.jsx)(Be.a,{className:"text-white"})}):Object(ne.jsx)(E.a,{onClick:function(){return B(!0)},size:"small",sx:{ml:2},children:Object(ne.jsx)(We.a,{className:"text-white"})})}),Object(ne.jsx)(_.a.Link,{className:"text-white fs-5",children:Object(ne.jsx)(E.a,{onClick:function(e){At(e.currentTarget)},size:"small",sx:{ml:2},children:Object(ne.jsx)(C.a,{style:{width:32,height:32},src:e.photo,alt:e.name})})}),Object(ne.jsxs)(ue.a,{anchorEl:Pt,open:qt,onClose:zt,onClick:zt,style:{marginTop:Dt.current.offsetHeight-15},PaperProps:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"& .MuiAvatar-root":{width:32,height:32,ml:-.5,mr:1},"&:before":{content:'""',display:"block",position:"absolute",top:0,right:14,width:10,height:10,bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:0}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[Object(ne.jsxs)(je.a,{children:[Object(ne.jsx)(C.a,{alt:e.name,src:e.photo,style:{width:22,height:22,marginRight:30}})," ",e.name]}),Object(ne.jsx)(be.a,{}),Object(ne.jsxs)(je.a,{children:[Object(ne.jsx)(me.a,{children:Object(ne.jsx)(Ie.a,{fontSize:"small"})}),"Settings"]}),Object(ne.jsxs)(je.a,{onClick:function(){c(function(){var e=Object(m.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem("user"),t({type:W});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Bt.current.disconnect(),d.push("/"),localStorage.removeItem("roomUser")},children:[Object(ne.jsx)(me.a,{children:Object(ne.jsx)(_e.a,{fontSize:"small"})}),"Logout"]})]})]})]})}),Object(ne.jsx)("section",{className:"bg__black",children:Object(ne.jsx)(p.a,{fluid:"lg",children:Object(ne.jsxs)(x.a,{children:[Object(ne.jsxs)(f.a,{md:3,xs:12,style:{height:"calc(100vh - ".concat(Dt.current.offsetHeight+Lt.current.offsetHeight,"px)"),backgroundColor:"#1c2834"},children:[Object(ne.jsx)(he.a,{square:!0,style:{marginTop:15,borderRadius:7},children:Object(ne.jsxs)(pe.a,{value:T,onChange:function(e,t){F(t)},variant:"fullWidth",indicatorColor:"primary",textColor:"primary","aria-label":"icon tabs example",children:[Object(ne.jsx)(xe.a,{icon:Object(ne.jsx)(qe.a,{}),"aria-label":"phone"}),Object(ne.jsx)(xe.a,{icon:Object(ne.jsx)(fe.a,{badgeContent:a&&a.length,color:"primary",children:Object(ne.jsx)(De.a,{})}),"aria-label":"favorite"})]})}),Object(ne.jsx)("div",{className:"search__bar",children:Object(ne.jsxs)(g.a,{className:"py-3",children:[Object(ne.jsx)(g.a.Text,{id:"search",className:"bg-white border-end-0",children:Object(ne.jsx)(de.a,{})}),Object(ne.jsx)(v.a,{className:"border-start-0",placeholder:"Search friend ...","aria-label":"Username","aria-describedby":"search",value:le,onChange:function(e){return ge(e.target.value)},type:"text"})]})}),le&&Nt&&Object(ne.jsx)("p",{className:"text-white",children:"Searching..."}),Ve?Object(ne.jsxs)(Oe.a,{elevation:10,body:!0,className:"bg-dark p-2 d-flex justify-content-between align-items-center mb-3",style:{cursor:"pointer"},children:[Object(ne.jsxs)("div",{className:"d-flex align-items-center",children:[Object(ne.jsx)(C.a,{alt:Ve.name,src:Ve.photo,className:"shadow-lg border"}),Object(ne.jsx)("div",{className:"ps-3 ",children:Object(ne.jsx)("p",{className:"text-white my-0 fs-6 user__name_list",children:Ve.name})})]}),Object(ne.jsx)("div",{children:Object(ne.jsx)(E.a,{onClick:function(){return Vt(Ve._id)},children:Object(ne.jsx)(De.a,{className:"text-white"})})})]}):Nt||!le||Ct?null:Object(ne.jsx)("p",{className:"text-white",children:"User is not found"}),1===T&&Object(ne.jsxs)("div",{children:[a&&a.map((function(e){return Object(ne.jsxs)(Oe.a,{elevation:10,body:!0,className:"bg-dark p-2 d-flex justify-content-between align-items-center mb-3",style:{cursor:"pointer"},children:[Object(ne.jsxs)("div",{className:"d-flex",children:[Object(ne.jsx)(C.a,{alt:"Friend",src:null===e||void 0===e?void 0:e.photo,className:"shadow-lg border"}),Object(ne.jsxs)("div",{className:"ps-3 ",children:[Object(ne.jsx)("p",{className:"text-white my-0 fs-6 user__name_list",children:null===e||void 0===e?void 0:e.name}),Object(ne.jsx)("p",{className:"text-white my-0 last__seen",children:"Wants to be your friend"})]})]}),Object(ne.jsxs)("div",{children:[Object(ne.jsx)(E.a,{onClick:function(){return Zt(null===e||void 0===e?void 0:e._id)},children:Object(ne.jsx)(De.a,{className:"text-white"})}),Object(ne.jsx)(E.a,{onClick:function(){return Xt(null===e||void 0===e?void 0:e._id)},children:Object(ne.jsx)(Pe.a,{className:"text-white"})})]})]})})),Fe&&Fe.map((function(e){return Object(ne.jsxs)(Oe.a,{elevation:10,body:!0,className:"bg-dark p-2 d-flex justify-content-between align-items-center mb-3",style:{cursor:"pointer"},children:[Object(ne.jsxs)("div",{className:"d-flex",children:[Object(ne.jsx)(C.a,{alt:"Friend",src:null===e||void 0===e?void 0:e.photo,className:"shadow-lg border"}),Object(ne.jsxs)("div",{className:"ps-3 ",children:[Object(ne.jsx)("p",{className:"text-white my-0 fs-6 user__name_list",children:null===e||void 0===e?void 0:e.name}),Object(ne.jsx)("p",{className:"text-white my-0 last__seen",children:"Wants to be your friend"})]})]}),Object(ne.jsxs)("div",{children:[Object(ne.jsx)(E.a,{onClick:function(){return Zt(null===e||void 0===e?void 0:e._id)},children:Object(ne.jsx)(De.a,{className:"text-white"})}),Object(ne.jsx)(E.a,{onClick:function(){return Xt(null===e||void 0===e?void 0:e._id)},children:Object(ne.jsx)(Pe.a,{className:"text-white"})})]})]})}))]}),k&&!T&&k.map((function(e){return Object(ne.jsx)(pt,{userInfo:e,messages:s&&s,findRoomUser:Wt,setReplyMsgDetails:rt,setDisplayMessages:vt,showMobileChat:mt},e.email)}))]}),Object(ne.jsx)(f.a,{md:9,xs:12,className:mt?"bg-primary position-absolute top-0 end-0 bottom-0 start-0":"bg-primary",style:{display:mt&&gt?"block":mt?"none":"block"},children:Object(ne.jsx)("main",{className:"position-relative h-100",children:(null===H||void 0===H?void 0:H.email)?Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsxs)("section",{className:"message__header d-flex justify-content-between align-items-center py-4 px-2 border-bottom",id:"user__head",children:[Object(ne.jsxs)("div",{className:"d-flex",children:[Object(ne.jsx)(C.a,{alt:null===H||void 0===H?void 0:H.name,src:null===H||void 0===H?void 0:H.photo,style:{height:50,width:50,cursor:"pointer"},onClick:function(){return at(!0)}}),Object(ne.jsxs)("div",{className:"ps-3",children:[Object(ne.jsx)("h4",{className:"text-white my-0",children:null===H||void 0===H?void 0:H.name}),Object(ne.jsx)("p",{className:"text-white my-0",children:(null===H||void 0===H?void 0:H.isActive)?"Online":"Last Seen ".concat(ve()(null===H||void 0===H?void 0:H.updatedAt).calendar())})]})]}),Object(ne.jsx)(E.a,{className:"float-end mobile__back_btn",onClick:function(){return vt(!1)},children:Object(ne.jsx)(Te.a,{className:"text-white"})})]}),Object(ne.jsx)(ye.a,{className:"message__body overflow-auto position-relative drag__drop",children:s&&s.map((function(t){return Object(ne.jsx)(bt,{messageDetails:t,user:e,roomUser:H,removeFile:Yt,editMsg:Kt,deleteMsg:Qt,replyMsg:$t},t._id)}))}),Object(ne.jsx)("section",{className:"input__area position-absolute bottom-0 start-0 end-0",id:"text__area",children:Object(ne.jsx)("form",{onSubmit:Gt,className:"mb-2 bg-primary pt-3",children:Object(ne.jsxs)(x.a,{children:[null!==ct&&(null===ct||void 0===ct?void 0:ct.message)&&Object(ne.jsx)(f.a,{xs:10,children:Object(ne.jsx)("div",{className:"px-3 py-2 bg-primary position-relative",children:Object(ne.jsxs)("p",{className:"mb-0 col-10 text-truncate text-white",children:[Object(ne.jsxs)("i",{children:[Object(ne.jsx)("b",{children:"Replying to : "}),Object(ne.jsx)(He.a,{style:{transform:"rotateY(180deg)",fontSize:20}}),ct.message," "]}),Object(ne.jsx)(He.a,{style:{fontSize:20}}),Object(ne.jsx)(E.a,{className:"position-absolute top-0 end-0",onClick:function(){rt({})},children:Object(ne.jsx)(z.a,{className:"text-white bg-dark rounded-circle"})})]})})}),null!==ct&&!(null===ct||void 0===ct?void 0:ct.message)&&(null===ct||void 0===ct?void 0:ct.file)&&Object(ne.jsx)(f.a,{xs:10,children:Object(ne.jsx)("div",{className:"px-3 py-2 bg-primary position-relative",children:Object(ne.jsxs)("p",{className:"mb-0 col-10 text-truncate text-white",children:[Object(ne.jsxs)("i",{children:[Object(ne.jsx)("b",{children:"Replying to : "}),Object(ne.jsx)(He.a,{style:{transform:"rotateY(180deg)",fontSize:20}}),"Attachment"]}),Object(ne.jsx)(He.a,{style:{fontSize:20}}),Object(ne.jsx)(E.a,{className:"position-absolute top-0 end-0",onClick:function(){rt({})},children:Object(ne.jsx)(z.a,{className:"text-white bg-dark rounded-circle"})})]})})}),Object(ne.jsx)(f.a,{xs:10,children:Object(ne.jsx)(O.a.Group,{controlId:"formBasicEmail",ref:It,children:Object(ne.jsx)(O.a.Control,{value:se,onChange:function(e){return ce(e.target.value)},onKeyPress:function(e){return"Enter"===e.key?Gt(e):ce(e.target.value)},ref:Ut,type:"text",as:"textarea",className:"rounded text__input bg-primary text-white",autoComplete:"off"})})}),Object(ne.jsx)(f.a,{xs:1,children:Object(ne.jsxs)("div",{className:"d-flex",children:[Object(ne.jsxs)("label",{htmlFor:"icon-button-file",className:"float-end",children:[Object(ne.jsx)("input",{id:"icon-button-file",type:"file",onChange:Ht,hidden:!0,multiple:!0}),Object(ne.jsx)(E.a,{"aria-label":"upload picture",component:"span",className:"border p-2 input__file__button",children:Object(ne.jsx)(Ee.a,{className:"attachments__icon text-dark"})})]}),Object(ne.jsx)(y.a,{variant:"outline-secondary rounded-circle p-2 pl-3 shadow-lg float-start",className:"ms-2",type:"submit",children:Object(ne.jsx)(Se.a,{className:"attachments__icon"})})]})})]})})})]}):Object(ne.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)"},children:Object(ne.jsx)("h4",{className:"text-white",children:"Please Select a conversation"})})})})]})})}),Object(ne.jsx)(N.a,{style:{background:"#000"},className:"nav__bar",ref:Lt,expand:"lg",children:Object(ne.jsxs)(p.a,{fluid:"md",children:[Object(ne.jsxs)(_.a,{className:"me-auto align-items-center py-3 text-white",children:["Copyright ",Object(ne.jsx)(I.a,{className:"me-2"})," ",(new Date).getFullYear()," ","e-Chat-Buddy. All rights reserved."]}),Object(ne.jsx)(_.a,{className:"ms-auto align-items-center py-3 text-white",children:"Designed & Developed By Sazzad Bin Anwar"})]})}),Object(ne.jsxs)(oe.a,{show:Je,onHide:function(){return Qe(!Je)},fullscreen:"md-down",centered:!0,backdrop:"static",className:"shadow-lg",children:[Object(ne.jsx)(oe.a.Header,{children:Object(ne.jsxs)(oe.a.Title,{className:"position-relative w-100",children:["Upload File"," ",Object(ne.jsx)(E.a,{className:"position-absolute top-0 end-0",onClick:function(){return Jt()},children:Object(ne.jsx)(z.a,{})})]})}),Object(ne.jsx)(oe.a.Body,{children:Object(ne.jsx)(x.a,{style:{maxHeight:450,overflowY:"auto"},children:Ce&&Ce.map((function(e){return Object(ne.jsx)(xt,{fileData:e,removeFile:Yt},e)}))})}),Object(ne.jsxs)(oe.a.Footer,{children:[Object(ne.jsx)(y.a,{variant:"secondary",onClick:function(){return Jt()},children:"Close"}),Object(ne.jsx)(y.a,{variant:"outline-primary",onClick:Gt,children:Object(ne.jsx)(Se.a,{className:"fs-7"})})]})]}),Object(ne.jsxs)(oe.a,{show:tt,onHide:function(){return at(!tt)},fullscreen:"md-down",centered:!0,className:"shadow-lg w-100",children:[(null===H||void 0===H?void 0:H.photo)?Object(ne.jsx)("img",{alt:null===H||void 0===H?void 0:H.name,src:null===H||void 0===H?void 0:H.photo,height:"auto",width:"auto"}):Object(ne.jsxs)("div",{className:"d-flex flex-column justify-content-center align-items-center  my-5",children:[Object(ne.jsx)("img",{alt:"userphoto",src:"/user.png",className:"rounded-circle bg-dark p-3",height:"150",width:"150"}),Object(ne.jsx)("h3",{className:"my-2",children:null===H||void 0===H?void 0:H.name})]}),Object(ne.jsx)(E.a,{className:"position-absolute top-0 end-0",onClick:function(){return at(!tt)},children:Object(ne.jsx)(z.a,{className:"text-white bg-dark"})})]})]})},Ot=function(){var e=Object(n.useState)([]),t=Object(h.a)(e,2),a=(t[0],t[1]);console.log("hello");return Object(ne.jsxs)("div",{children:[Object(ne.jsx)("div",{className:"drop-container d-flex justify-content-center align-items-center",onDragOver:function(e){e.preventDefault()},onDragEnter:function(e){e.preventDefault()},onDragLeave:function(e){e.preventDefault()},onDrop:function(e){e.preventDefault();var t=e.dataTransfer.files;t.length&&function(e){a(e),console.log(e)}(t)},style:{height:300,width:300,border:"1px solid black"},children:Object(ne.jsxs)("div",{className:"drop-message",children:[Object(ne.jsx)("div",{className:"upload-icon"}),"Drag and Drop files here or click to upload"]})}),Object(ne.jsx)("div",{className:"files"})]})},gt=function(){return Object(ne.jsxs)(l.d,{children:[Object(ne.jsx)(l.b,{path:"/test",component:Ot}),Object(ne.jsx)(ie,{path:"/chat",children:Object(ne.jsx)(ft,{})}),Object(ne.jsx)(l.b,{path:"/not-found",component:ce}),Object(ne.jsx)(l.b,{exact:!0,path:"/",component:se}),Object(ne.jsx)(l.a,{to:"/not-found"})]})},vt=(a(553),a(554),a(555),function(){return Object(ne.jsx)(o.a,{children:Object(ne.jsx)(l.b,{path:"/",component:gt})})}),wt=a(122),yt=a(329),Nt=a(330),_t=Object(wt.combineReducers)({userLogin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B:case G:return{loading:!1,user:t.payload};case H:case M:return{loading:!1,error:t.payload};case W:return{};default:return e}},friends:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Q:return{friends:t.payload};case K:return{error:t.payload};default:return e}},friendRequests:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Y:return{friendRequest:t.payload};case J:return{error:t.payload};default:return e}},chat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $:return{chat:t.payload};case V:return{error:t.payload};default:return e}}}),kt=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):{},St={userLogin:{user:kt.isLoggedIn?kt:{isLoggedIn:!1}}},Ct=[Nt.a],Et=Object(wt.createStore)(_t,St,Object(yt.composeWithDevTools)(wt.applyMiddleware.apply(void 0,Ct))),Rt=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,600)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),n(e),s(e),c(e),r(e)}))},Dt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Lt(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(Object(ne.jsx)(r.a,{store:Et,children:Object(ne.jsx)(i.ToastProvider,{children:Object(ne.jsx)(vt,{})})}),document.getElementById("root")),Rt(),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");Dt?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Lt(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Lt(t,e)}))}}()}},[[556,1,2]]]);
//# sourceMappingURL=main.4c8b8a43.chunk.js.map