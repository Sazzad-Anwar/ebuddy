(this["webpackJsonpmern-pwa-project-template"]=this["webpackJsonpmern-pwa-project-template"]||[]).push([[0],{212:function(e){e.exports=JSON.parse('{"a":""}')},547:function(e,t,n){},548:function(e,t,n){},549:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n(14),c=n.n(s),r=n(44),i=n(93),o=n(80),l=n(24),u=n(10),d=n.n(u),j=n(160),m=n(19),h=n(13),b=n(577),p=n(578),x=n(294),f=n(592),O=n(583),g=n(595),v=n(593),w=n(33),y=n.n(w),N=n(597),_=n(581),k=n(582),S=n(596),C=n(74),E=n.n(C),D=n(157),R=n.n(D),I="USER_LOGIN_REQUEST",L="USER_LOGIN_SUCCESS",U="USER_LOGIN_FAILED",T="USER_LOGOUT",F="USER_UPDATE_SUCCESS",A="USER_UPDATE_FAILED",P="FRIEND_REQUEST_SUCCESS",M="FRIEND_REQUEST_ERROR",z="GET_FRIENDS_SUCCESS",q="GET_FRIENDS_ERROR",G="GET_CHAT_MESSAGE",W="GET_CHAT_MESSAGE_ERROR",B=function(e){return function(){var t=Object(m.a)(d.a.mark((function t(n){var a,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.a.get("/api/v1/user?search=".concat(e));case 3:a=t.sent,s=a.data,n({type:P,payload:s.friendRequests}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n({type:M,payload:t.t0.response?t.t0.response:t.t0.message});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},H=function(e){return function(){var t=Object(m.a)(d.a.mark((function t(n){var a,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.a.get("/api/v1/user?search=".concat(e));case 3:a=t.sent,s=a.data,n({type:z,payload:s.friends}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n({type:q,payload:t.t0.response?t.t0.response:t.t0.message});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},J=function(){return function(){var e=Object(m.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.get("/api/v1/messages");case 3:n=e.sent,a=n.data,t({type:G,payload:a.messages}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t({type:W,payload:e.t0.response?e.t0.response:e.t0.message});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},Y=n(1),Q=function(){var e,t=Object(i.useToasts)().addToast,n=Object(r.c)((function(e){return e.userLogin})).user,s=Object(l.g)(),c=Object(r.b)(),o=Object(a.useState)(""),u=Object(h.a)(o,2),w=u[0],C=u[1],D=Object(a.useState)(""),T=Object(h.a)(D,2),F=T[0],A=T[1],P=Object(a.useState)([]),M=Object(h.a)(P,2),z=M[0],q=M[1],G=Object(a.useState)(!1),W=Object(h.a)(G,2),B=W[0],H=W[1],J=Object(a.useRef)(0),Q=function(){var e=Object(m.a)(d.a.mark((function e(t){var n,a,s,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=t.target.files,a=new FormData,s=0;s<n.length;s++)a.append("uploads",n[s]);return e.prev=3,e.next=6,y.a.post("/api/v1/upload",a);case 6:c=e.sent,c.data.map((function(e){return q((function(t){return[].concat(Object(j.a)(t),[e.filePath])}))})),H(!0),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),console.log(e.t0.response);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(m.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.split("/uploads/")[1],console.log({id:t,uploadId:n}),e.next=4,y.a.delete("/api/v1/upload/".concat(n));case 4:q(z.filter((function(e){return e!==t}))),H(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){n&&(null===n||void 0===n?void 0:n.isLoggedIn)&&s.push("/chat")}),[s,c,n]);var $=function(){var e=Object(m.a)(d.a.mark((function e(){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!F||B){e.next=9;break}return e.next=4,y.a.get("/api/v1/user?search=".concat(F));case 4:n=e.sent,(a=n.data).isSuccess&&(console.log(a.user.photo),q([a.user.photo])),e.next=10;break;case 9:F?F&&B&&q([]):(t("Email can not be null",{autoDismiss:!0,appearance:"error"}),H(!1));case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();return Object(Y.jsxs)("div",{className:"bg-primary login__screen",children:[Object(Y.jsxs)(b.a,{className:"",children:[Object(Y.jsx)("h3",{className:"text-white pt-5 text-center",children:"e-chat-Buddy"}),Object(Y.jsxs)(p.a,{children:[Object(Y.jsx)(x.a,{lg:4}),Object(Y.jsx)(x.a,{xs:12,md:12,lg:4,children:Object(Y.jsxs)(f.a,{onSubmit:function(e){if(e.preventDefault(),w&&F){var n={name:w,email:F,photo:z[0]};c(function(e){return function(){var t=Object(m.a)(d.a.mark((function t(n){var a,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:I}),t.next=4,y.a.post("/api/v1/user",e);case 4:a=t.sent,s=a.data,console.log(s),localStorage.setItem("user",JSON.stringify(s.user)),n({type:L,payload:s.user}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),n({type:U,payload:t.t0.response?t.t0.response:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()}(n)),s.push("/chat")}else t("Name or Email can not be null",{autoDismiss:!0,appearance:"error"})},className:"my-5",children:[Object(Y.jsxs)("div",{className:"d-flex justify-content-center align-items-center position-relative photo",children:[Object(Y.jsx)(N.a,{alt:w,src:null!==(e=z[0])&&void 0!==e?e:"/logo.gif",style:{height:150,width:150},className:"shadow-lg border border-dark"}),z[0]&&Object(Y.jsx)(_.a,{className:"position-absolute delete__icon",onClick:function(){return K(z[0])},children:Object(Y.jsx)(E.a,{className:"text-white"})})]}),Object(Y.jsxs)(f.a.Group,{className:"mb-3",controlId:"name",children:[Object(Y.jsx)(f.a.Label,{className:"text-white",children:"User Name"}),Object(Y.jsx)(f.a.Control,{value:w,onChange:function(e){return C(e.target.value)},type:"text",placeholder:"Enter Name",htmlFor:"name"})]}),Object(Y.jsxs)(f.a.Group,{className:"mb-3",controlId:"email",children:[Object(Y.jsx)(f.a.Label,{className:"text-white",children:"Email address"}),Object(Y.jsx)(f.a.Control,{value:F,onChange:function(e){return A(e.target.value)},type:"email",placeholder:"Enter email",htmlFor:"email"})]}),Object(Y.jsx)(k.a,{control:Object(Y.jsx)(S.a,{checked:B,onChange:function(){H(!B),$()},className:"text-white"}),label:"Photo is Uploaded",className:"text-white"}),!B&&Object(Y.jsxs)(f.a.Group,{className:"mb-3",controlId:"photo",children:[Object(Y.jsx)(f.a.Label,{className:"text-white",children:"Upload Your Photo"}),Object(Y.jsx)("div",{className:"input-group mb-3",children:Object(Y.jsx)("input",{type:"file",className:"form-control",accept:"image/*",onChange:Q,placeholder:"Input Photos",id:"inputGroupFile02"})})]}),Object(Y.jsx)(O.a,{variant:"outline-secondary w-100",type:"submit",children:"Login"})]})}),Object(Y.jsx)(x.a,{lg:4})]})]}),Object(Y.jsx)(g.a,{className:"nav__bar fixed-bottom",ref:J,expand:"lg",children:Object(Y.jsxs)(b.a,{className:"d-flex flex-column",children:[Object(Y.jsxs)(v.a,{className:" align-items-center py-2 text-white",children:["Copyright ",Object(Y.jsx)(R.a,{className:"me-2"})," ",(new Date).getFullYear()," ","e-Chat-Buddy. All rights reserved."]}),Object(Y.jsx)(v.a,{className:"align-items-center pb-4 text-white",children:"Designed & Developed By Sazzad Bin Anwar"})]})})]})},K=function(){return Object(Y.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)"},children:Object(Y.jsx)("h4",{children:"404 | Page Not Found"})})},$=n(217),V=n(326),X=function(e){var t=e.children,n=Object(V.a)(e,["children"]),a=Object(r.c)((function(e){return e.userLogin})).user;return Object(Y.jsx)(l.b,Object($.a)(Object($.a)({},n),{},{render:function(e){var n=e.location;return a&&a.isLoggedIn?t:Object(Y.jsx)(l.a,{to:{pathname:"/",state:{from:n}}})}}))},Z=n(551),ee=function(){return Object(Y.jsx)(Y.Fragment,{children:Object(Y.jsx)(Z.a,{component:"h1",variant:"h4",style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)"},children:"This is login page"})})},te=n(589),ne=n(295),ae=n(590),se=n(320),ce=n.n(se),re=n(591),ie=n(598),oe=n(586),le=n(587),ue=n(552),de=n(594),je=n(588),me=n(585),he=n(584),be=n(84),pe=n.n(be),xe=n(299),fe=n(325),Oe=n(318),ge=n.n(Oe),ve=n(216),we=n.n(ve),ye=n(322),Ne=n.n(ye),_e=n(99),ke=n.n(_e),Se=n(118),Ce=n.n(Se),Ee=n(317),De=n.n(Ee),Re=n(321),Ie=n.n(Re),Le=n(215),Ue=n.n(Le),Te=n(319),Fe=n.n(Te),Ae=n(315),Pe=n.n(Ae),Me=n(316),ze=n.n(Me),qe=n(12),Ge=n.n(qe),We=n(210),Be=n(214),He=n.n(Be),Je=n(203),Ye=n.n(Je),Qe=n(313),Ke=n.n(Qe),$e=n(117),Ve=n.n($e),Xe=n(312),Ze=n.n(Xe),et=n(213),tt=n.n(et),nt=n(211),at=n.n(nt),st=n(111),ct=n.n(st),rt=n(212),it=function(e){var t=e.fileData,n=e.setShow,a=e.setChatImage,s=e.fileLength;return".png"===Ge.a.extname(t)||".jpg"===Ge.a.extname(t)||".jpeg"===Ge.a.extname(t)||".gif"===Ge.a.extname(t)?Object(Y.jsx)(x.a,{xs:12,md:1===s?12:2===s?6:4,className:"g-2",children:Object(Y.jsxs)(he.a,{elevation:5,className:"mb-0 img__card",style:{cursor:"pointer",position:"relative",height:200,width:200},children:[Object(Y.jsx)("img",{src:t,height:200,width:"auto",className:"position-absolute",alt:"upload-".concat(t),style:{right:0,top:0,bottom:0,left:0}}),Object(Y.jsx)("div",{className:"position-absolute start-0 top-0 end-0 bottom-0 download__btn",children:Object(Y.jsx)(tt.a,{className:"bg-white rounded-circle position-absolute",style:{top:"50%",left:"50%",transform:"translate(-50%,-50%)",cursor:"pointer",zIndex:1},onClick:function(){return at.a.saveAs("".concat(rt.a).concat(t),"image.".concat(Ge.a.extname(t)))}})}),Object(Y.jsx)("div",{className:"position-absolute start-0 top-0 end-0 bottom-0 download__btn",children:Object(Y.jsx)(Ze.a,{className:"bg-white rounded-circle position-absolute",style:{top:0,right:0,cursor:"pointer"},onClick:function(){n(!0),a(t)}})})]})},t):".mp4"===Ge.a.extname(t)||".mov"===Ge.a.extname(t)||".wmv"===Ge.a.extname(t)||".flv"===Ge.a.extname(t)||".webm"===Ge.a.extname(t)||".mkv"===Ge.a.extname(t)?Object(Y.jsx)(x.a,{xs:12,className:"g-2",children:Object(Y.jsx)(he.a,{elevation:5,className:"mb-0 img__card",style:{cursor:"pointer",position:"relative",height:400,width:400},children:Object(Y.jsx)("video",{controls:!0,width:"100%",height:"400",children:Object(Y.jsx)("source",{src:t,type:"video/".concat(Ge.a.extname(t).split(".")[1])})})})},t):".mp3"===Ge.a.extname(t)||".ogg"===Ge.a.extname(t)||".mpeg"===Ge.a.extname(t)?Object(Y.jsx)(x.a,{xs:12,className:"g-2",children:Object(Y.jsx)("audio",{controls:!0,children:Object(Y.jsx)("source",{src:t,type:"audio/".concat(Ge.a.extname(t).split(".")[1])})})},t):Object(Y.jsx)(x.a,{xs:12,className:"g-2",children:Object(Y.jsx)(he.a,{elevation:5,className:"mb-0 py-1 px-2 rounded",style:{backgroundColor:"#616161"},children:Object(Y.jsxs)("div",{className:"d-flex justify-content-between align-items-center",style:{width:200},children:[Object(Y.jsx)(ct.a,{className:"text-white"}),Object(Y.jsx)("span",{className:"col-4 text-truncate text-white",children:t.split("/")[2]}),Object(Y.jsx)("span",{className:"text-white",children:Ge.a.extname(t)}),Object(Y.jsx)(_.a,{children:Object(Y.jsx)(tt.a,{className:"text-white",onClick:function(){return at.a.saveAs("".concat(rt.a).concat(t),"file.".concat(Ge.a.extname(t)))}})})]})})},t)},ot=function(e){var t=e.messageDetails,n=e.user,s=e.roomUser,c=e.editMsg,r=e.deleteMsg,i=e.replyMsg,o=Object(a.useState)(!1),l=Object(h.a)(o,2),u=l[0],d=l[1],j=Object(a.useState)(null),m=Object(h.a)(j,2),b=m[0],x=m[1],f=Object(a.useState)(""),O=Object(h.a)(f,2),g=O[0],v=O[1],w=Boolean(b),y=function(e){x(e.currentTarget)},k=function(){x(null)};return n.email!==t.from&&s.email===t.from&&n.email===t.to?Object(Y.jsxs)("div",{className:"d-flex my-3 chat__buddy",style:{marginRight:"20%"},children:[Object(Y.jsx)(N.a,{alt:s.name,src:s.photo,style:{width:32,height:32}}),Object(Y.jsxs)("div",{className:"d-flex flex-column align-items-start",children:[Object(Y.jsxs)("div",{className:"d-flex",children:[t.message&&Object(Y.jsxs)("div",{className:"chat__card chat__person ms-0 p-2",children:[t.repliedOf&&Object(Y.jsxs)(he.a,{body:!0,className:"chat__card chat__person p-2 chat__reply text-white rounded-top",children:["".concat(t.repliedOf.length>200?t.repliedOf.substring(0,200):t.repliedOf,"...")," ",Object(Y.jsx)(Ve.a,{})]}),Object(Y.jsx)(he.a,{body:!0,className:"chat__card chat__person p-2",style:{width:"100%"},children:t.message.startsWith("http")?Object(Y.jsx)(We.ReactTinyLink,{cardSize:"small",showGraphic:!0,maxLine:2,minLine:1,proxyUrl:"https://corsanywhere.herokuapp.com",url:t.message}):t.message})]}),Object(Y.jsx)(_.a,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:y,className:"ms-2",children:Object(Y.jsx)(He.a,{})}),Object(Y.jsx)(re.a,{id:"long-menu",anchorEl:b,keepMounted:!0,open:w,onClose:k,PaperProps:{style:{maxHeight:216}},children:Object(Y.jsx)(ie.a,{onClick:function(){k(),i(t._id)},children:Object(Y.jsx)(Ve.a,{})})})]}),t.file&&Object(Y.jsx)(p.a,{className:"ms-2",children:t.file.map((function(e){return Object(Y.jsx)(it,{fileData:e,setShow:d,setChatImage:v},e)}))}),Object(Y.jsx)("p",{className:"text-white ms-2 mt-1 last__seen",children:pe()(t.updatedAt).fromNow()})]})]}):n.email===t.from&&s.email===t.to?Object(Y.jsxs)("div",{className:"d-flex flex-column justify-content-end align-items-end my-3",style:{marginLeft:"20%"},children:[Object(Y.jsxs)("div",{className:"d-flex my__chat text-right justify-content-end",children:[Object(Y.jsxs)("div",{className:"chat__card me-3 d-flex justify-content-center align-items-center",children:[Object(Y.jsx)(_.a,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:y,className:"me-3",children:Object(Y.jsx)(He.a,{})}),Object(Y.jsxs)(re.a,{id:"long-menu",anchorEl:b,keepMounted:!0,open:w,onClose:k,PaperProps:{style:{maxHeight:216}},children:[Object(Y.jsx)(ie.a,{onClick:function(){k(),r(t._id)},children:Object(Y.jsx)(Ye.a,{})}),t.message&&Object(Y.jsx)(ie.a,{onClick:function(){k(),c(t._id)},children:Object(Y.jsx)(Ke.a,{})}),Object(Y.jsx)(ie.a,{onClick:function(){k(),i(t._id)},children:Object(Y.jsx)(Ve.a,{})})]}),Object(Y.jsxs)("div",{className:"d-flex flex-column justify-content-end align-items-center",children:[t.message&&Object(Y.jsxs)("div",{className:"chat__person p-2",children:[t.repliedOf&&Object(Y.jsxs)(he.a,{body:!0,className:"chat__person p-2 chat__reply text-white",children:["".concat(t.repliedOf.substring(0,200),"...")," ",Object(Y.jsx)(Ve.a,{})]}),Object(Y.jsx)(he.a,{body:!0,className:"chat__person p-2",style:{width:"100%"},children:t.message.startsWith("http")?Object(Y.jsx)(We.ReactTinyLink,{cardSize:"small",showGraphic:!0,maxLine:2,minLine:1,proxyUrl:"https://corsanywhere.herokuapp.com",url:t.message}):t.message})]}),t.file&&Object(Y.jsx)(p.a,{children:t.file.map((function(e){return Object(Y.jsx)(it,{fileData:e,setShow:d,setChatImage:v,fileLength:t.file.length},e)}))})]})]}),Object(Y.jsx)(N.a,{alt:n.name,src:n.photo,style:{width:32,height:32,marginRight:10}})]}),Object(Y.jsx)("p",{className:"text-white mt-1 me-3 pe-5 last__seen",children:pe()(t.updatedAt).fromNow()}),Object(Y.jsxs)(ae.a,{show:u,onHide:function(){return d(!u)},fullscreen:"md-down",centered:!0,className:"shadow-lg w-100",children:[Object(Y.jsx)("img",{alt:g,src:g}),Object(Y.jsx)(ke.a,{className:"bg-white rounded-circle position-absolute",style:{top:"-10px",right:"-10px",cursor:"pointer"},onClick:function(){return d(!u)}})]})]}):(s.email,t.to,null)},lt=function(e){var t=e.userInfo,n=e.messages,a=e.findRoomUser,s=e.setReplyMsgDetails,c=e.setDisplayMessages,r=e.showMobileChat;return Object(Y.jsxs)(he.a,{elevation:10,body:!0,className:(null===t||void 0===t?void 0:t.isActive)?"bg__green p-2 d-flex align-items-center mb-3":"bg-dark p-2 d-flex align-items-center mb-3",style:{cursor:"pointer"},onClick:function(){a(null===t||void 0===t?void 0:t.email),s(""),c(!!r)},children:[Object(Y.jsx)(me.a,{badgeContent:(null===t||void 0===t?void 0:t.isActive)?null===n||void 0===n?void 0:n.filter((function(e){return e.from===(null===t||void 0===t?void 0:t.email)})).length:0,color:"primary",children:Object(Y.jsx)(N.a,{alt:null===t||void 0===t?void 0:t.name,src:null===t||void 0===t?void 0:t.photo,className:"shadow-lg border"})}),Object(Y.jsxs)("div",{className:"ps-3 ",children:[Object(Y.jsx)("p",{className:"text-white my-0 fs-6 user__name_list",children:null===t||void 0===t?void 0:t.name}),Object(Y.jsx)("p",{className:"text-white my-0 last__seen",children:(null===t||void 0===t?void 0:t.isActive)?"Online":"Active ".concat(pe()(null===t||void 0===t?void 0:t.updatedAt).fromNow())})]})]})},ut=function(e){var t=e.fileData,n=e.removeFile;return".png"===Ge.a.extname(t)||".jpg"===Ge.a.extname(t)||".jpeg"===Ge.a.extname(t)||".gif"===Ge.a.extname(t)?Object(Y.jsx)(x.a,{xs:12,md:6,className:"g-2",children:Object(Y.jsxs)(he.a,{elevation:5,className:"mb-0 img__card",style:{position:"relative",height:200,width:"100%"},children:[Object(Y.jsx)("img",{src:t,height:200,width:"auto",className:"position-absolute",alt:"upload-".concat(t),style:{right:0,top:0,bottom:0,left:0}}),Object(Y.jsx)(E.a,{className:"position-absolute bg-white text-dark",style:{right:0,top:0,cursor:"pointer"},onClick:function(){return n(t)}})]})},t):".mp4"===Ge.a.extname(t)||".mov"===Ge.a.extname(t)||".wmv"===Ge.a.extname(t)||".flv"===Ge.a.extname(t)||".webm"===Ge.a.extname(t)||".mkv"===Ge.a.extname(t)?Object(Y.jsx)(x.a,{xs:12,className:"g-2",children:Object(Y.jsxs)(he.a,{elevation:5,className:"mb-0 img__card",style:{position:"relative"},children:[Object(Y.jsx)("video",{controls:!0,width:"100%",height:"400",children:Object(Y.jsx)("source",{src:t,type:"video/".concat(Ge.a.extname(t).split(".")[1])})}),Object(Y.jsx)(E.a,{className:"position-absolute bg-white text-dark",style:{right:0,top:0,cursor:"pointer",zIndex:1},onClick:function(){return n(t)}})]})},t):".mp3"===Ge.a.extname(t)||".ogg"===Ge.a.extname(t)||".mpeg"===Ge.a.extname(t)?Object(Y.jsx)(x.a,{xs:12,className:"g-2",children:Object(Y.jsxs)("div",{className:"position-relative",children:[Object(Y.jsx)("audio",{controls:!0,children:Object(Y.jsx)("source",{src:t,type:"audio/".concat(Ge.a.extname(t).split(".")[1])})}),Object(Y.jsx)(E.a,{className:"position-absolute bg-white text-dark",style:{right:0,top:0,cursor:"pointer"},onClick:function(){return n(t)}})]})},t):Object(Y.jsx)(x.a,{xs:12,md:6,className:"g-2",children:Object(Y.jsx)(he.a,{elevation:5,className:"mb-0 py-3 px-3 rounded position-relative",style:{backgroundColor:"#616161"},children:Object(Y.jsxs)("div",{className:"d-flex justify-content-between align-items-center",style:{width:200},children:[Object(Y.jsx)(ct.a,{className:"text-white"}),Object(Y.jsx)("span",{className:"col-4 text-truncate text-white",children:t.split("/")[2]}),Object(Y.jsx)("span",{className:"text-white",children:Ge.a.extname(t)}),Object(Y.jsx)(E.a,{className:"position-absolute",style:{right:0,top:0,cursor:"pointer"},onClick:function(){return n(t)}})]})})},t)};var dt=function(e,t){var n=Object(a.useState)(e),s=Object(h.a)(n,2),c=s[0],r=s[1];return Object(a.useEffect)((function(){var n=setTimeout((function(){r(e)}),t);return function(){clearTimeout(n)}}),[e,t]),c},jt=function(){var e=Object(r.c)((function(e){return e.userLogin})).user,t=Object(r.c)((function(e){return e.friends})).friends,n=Object(r.c)((function(e){return e.friendRequests})).friendRequest,s=Object(r.c)((function(e){return e.chat})).chat,c=Object(r.b)(),u=Object(l.g)(),w=Object(a.useState)(t&&t),k=Object(h.a)(w,2),S=k[0],C=k[1],E=Object(i.useToasts)().addToast,D=Object(a.useState)(0),I=Object(h.a)(D,2),L=I[0],U=I[1],F=Object(a.useState)(!0),A=Object(h.a)(F,2),P=A[0],M=A[1],z=Object(a.useState)({}),q=Object(h.a)(z,2),G=q[0],W=q[1],Q=Object(a.useState)(s&&s),K=Object(h.a)(Q,2),$=K[0],V=K[1],X=Object(a.useState)(""),Z=Object(h.a)(X,2),ee=Z[0],se=Z[1],be=Object(a.useState)(""),Oe=Object(h.a)(be,2),ve=Oe[0],ye=Oe[1],_e=Object(a.useState)([]),Se=Object(h.a)(_e,2),Ee=Se[0],Re=Se[1],Le=Object(a.useState)([]),Te=Object(h.a)(Le,2),Ae=Te[0],Me=Te[1],qe=Object(a.useState)([]),Ge=Object(h.a)(qe,2),We=(Ge[0],Ge[1],Object(a.useState)(!1)),Be=Object(h.a)(We,2),He=Be[0],Je=Be[1],Ye=Object(a.useState)(),Qe=Object(h.a)(Ye,2),Ke=Qe[0],$e=Qe[1],Ve=Object(a.useState)(!1),Xe=Object(h.a)(Ve,2),Ze=Xe[0],et=Xe[1],tt=Object(a.useState)(null),nt=Object(h.a)(tt,2),at=nt[0],st=nt[1],ct=Object(a.useState)(""),rt=Object(h.a)(ct,2),it=rt[0],jt=rt[1],mt=Object(a.useState)(!1),ht=Object(h.a)(mt,2),bt=ht[0],pt=ht[1],xt=Object(a.useState)(!1),ft=Object(h.a)(xt,2),Ot=ft[0],gt=ft[1],vt=Object(a.useState)(!1),wt=Object(h.a)(vt,2),yt=wt[0],Nt=wt[1],_t=Object(a.useState)(!0),kt=Object(h.a)(_t,2),St=kt[0],Ct=kt[1],Et=dt(ve,1e3),Dt=Object(a.useRef)(0),Rt=Object(a.useRef)(0),It=Object(a.useRef)(0),Lt=Object(a.useRef)(null),Ut=Object(a.useState)(null),Tt=Object(h.a)(Ut,2),Ft=Tt[0],At=Tt[1],Pt=Boolean(Ft),Mt=function(){At(null)},zt=Object(a.useRef)(null),qt=function(){var e=Object(m.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.get("/api/v1/user?search=".concat(t));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.response);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){return zt.current=Object(xe.io)("/"),zt.current.on("user-joined",(function(n){var a=n.allUsers.filter((function(n){return n.email!==e.email&&t&&(null===t||void 0===t?void 0:t.find((function(e){return e.email===n.email})))}));C(a),n.joinedUser&&n.joinedUser.email!==e.email&&(null===e||void 0===e?void 0:e.isLoggedIn)&&t&&(null===t||void 0===t?void 0:t.find((function(e){return e.email===n.email})))?(E("".concat(n.joinedUser.name," is active"),{appearance:"info",autoDismiss:!0}),null!==G&&(null===G||void 0===G?void 0:G.email)===n.joinedUser.email&&W(n.joinedUser)):n.leavingUser&&n.leavingUser.email!==e.email&&(null===e||void 0===e?void 0:e.isLoggedIn)&&W()})),zt.current.emit("user-login",e),zt.current.on("friend-request",(function(t){var n=t.requestReceiver,a=t.requestSender;t.message,t.requestSenderUser;n!==a&&c(B(e.email))})),zt.current.on("friend-list",(function(t){t.requestId;t.userId===e._id&&(c(H(e.email)),c(B(e.email)))})),function(){zt.current.off("user-joined",(function(e){})),zt.current.off("room-user-details",(function(e){})),zt.current.off("friend-request",(function(){})),zt.current.off("friend-list",(function(){})),window.removeEventListener("resize",(function(){}))}}),[E,e,u,at,P,G,Ae,c,t]),Object(a.useEffect)((function(){var t=new Audio("/msg_sound.mp3");return zt.current.on("removeMsgFromChat",function(){var e=Object(m.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.get("/api/v1/messages");case 3:n=e.sent,a=n.data,V(a.messages),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()),zt.current.on("chat-message",function(){var n=Object(m.a)(d.a.mark((function n(a){return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a.from!==e.email&&t.play(),a.from!==e.email&&a.to!==e.email||c(J());case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),function(){zt.current.off("chat-message",(function(e){})),zt.current.off("removeMsgFromChat",(function(e){}))}}),[c,$,e.email]),console.log(s),Object(a.useEffect)((function(){Et?(Nt(!0),Ct(!0),function(){var e=Object(m.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,qt(Et);case 3:(t=e.sent).isSuccess?($e(t.user),Nt(!1)):(Nt(!1),Ct(!1)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()()):(Nt(!1),$e(""));e||(null===e||void 0===e?void 0:e.isLoggedIn)||u.push("/"),window.innerWidth<991&&pt(!0),window.addEventListener("resize",(function(){window.innerWidth<991&&pt(!0)})),null!==at&&at.message&&Lt.current.focus(),c(B(e.email)),c(H(e.email)),c(J())}),[Et,c,u,at,e]);var Gt=function(e){W(S.filter((function(t){return t.email===e}))[0])},Wt=function(){var t=Object(m.a)(d.a.mark((function t(n){var a,s,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),a={_id:it,user:e._id,from:e.email,file:Ee,repliedOf:(null===at||void 0===at?void 0:at.message)?null===at||void 0===at?void 0:at.message:(null===at||void 0===at?void 0:at.file)?null===at||void 0===at?void 0:at.file[0]:"",to:null===G||void 0===G?void 0:G.email,message:ee,sendAt:Date.now()},!(ee&&"Enter"===n.key||ee||Ee)){t.next=17;break}return se(""),t.prev=4,t.next=7,y.a.post("/api/v1/messages",a);case 7:s=t.sent,(r=s.data).message&&(c(J()),zt.current.emit("message",r.message),Je(!1),Re([]),st({}),jt("")),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(4),console.log(t.t0);case 15:t.next=18;break;case 17:E("Please Write something",{appearance:"info",autoDismiss:!0});case 18:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(e){return t.apply(this,arguments)}}(),Bt=function(){var e=Object(m.a)(d.a.mark((function e(t){var n,a,s,c,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=t.target.files,a=new FormData,s=0;s<n.length;s++)a.append("uploads",n[s]);return e.prev=3,e.next=6,y.a.post("/api/v1/upload",a);case 6:c=e.sent,(r=c.data).map((function(e){return Re((function(t){return[].concat(Object(j.a)(t),[e.filePath])}))})),r.length?Je(!0):Je(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),console.log(e.t0.response);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}(),Ht=function(){var e=Object(m.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.split("/uploads/")[1],e.next=3,y.a.delete("/api/v1/upload/".concat(n));case 3:Re(Ee.filter((function(e){return e!==t}))),1===Ee.length?Je(!1):Je(!0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Jt=function(){Ee.length&&(Ee.map((function(e){return Ht(e)})),Ee.length-1>0&&E("Remove ".concat(Ee.length-1," files"),{autoDismiss:!0,appearance:"info"})),Ee.length||Je(!He)},Yt=function(e){zt.current.emit("messageDelete",e)},Qt=function(e){jt(e),V($.filter((function(t){return t._id!==e}))),se($.filter((function(t){return t._id===e}))[0].message)},Kt=function(e){st($.filter((function(t){return t._id===e}))[0])},$t=function(){var t=Object(m.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:zt.current.emit("friend-request-send",{friendId:n,myId:e._id});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Vt=function(){var t=Object(m.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:zt.current.emit("friend-request-declined",{requestId:n,userId:e._id}),Ae&&Me(Ae.filter((function(e){return e._id!==n}))),c(B(e.email));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Xt=function(){var t=Object(m.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:zt.current.emit("friend-request-accepted",{requestId:n,userId:e._id}),console.log("clicked");case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(Y.jsxs)("div",{children:[Object(Y.jsx)(g.a,{bg:"dark",className:"nav__bar",ref:Dt,expand:"lg",children:Object(Y.jsxs)(b.a,{fluid:"lg",children:[Object(Y.jsx)(o.b,{to:"/",children:Object(Y.jsxs)(g.a.Brand,{className:"text-white align-items-center",children:[Object(Y.jsx)("img",{className:"app__logo me-2",height:"30px",src:"/logo.gif",alt:"logo"}),Object(Y.jsx)("span",{className:"h4",children:"Chat-Buddy"})]})}),Object(Y.jsxs)(v.a,{className:"ms-auto align-items-center",children:[Object(Y.jsx)(v.a.Link,{className:"text-white fs-5",children:P?Object(Y.jsx)(_.a,{onClick:function(){return M(!1)},size:"small",sx:{ml:2},children:Object(Y.jsx)(Pe.a,{className:"text-white"})}):Object(Y.jsx)(_.a,{onClick:function(){return M(!0)},size:"small",sx:{ml:2},children:Object(Y.jsx)(ze.a,{className:"text-white"})})}),Object(Y.jsx)(v.a.Link,{className:"text-white fs-5",children:Object(Y.jsx)(_.a,{onClick:function(e){At(e.currentTarget)},size:"small",sx:{ml:2},children:Object(Y.jsx)(N.a,{style:{width:32,height:32},src:e.photo,alt:e.name})})}),Object(Y.jsxs)(re.a,{anchorEl:Ft,open:Pt,onClose:Mt,onClick:Mt,style:{marginTop:Dt.current.offsetHeight-15},PaperProps:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"& .MuiAvatar-root":{width:32,height:32,ml:-.5,mr:1},"&:before":{content:'""',display:"block",position:"absolute",top:0,right:14,width:10,height:10,bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:0}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[Object(Y.jsxs)(ie.a,{children:[Object(Y.jsx)(N.a,{alt:e.name,src:e.photo,style:{width:22,height:22,marginRight:30}})," ",e.name]}),Object(Y.jsx)(oe.a,{}),Object(Y.jsxs)(ie.a,{children:[Object(Y.jsx)(le.a,{children:Object(Y.jsx)(De.a,{fontSize:"small"})}),"Settings"]}),Object(Y.jsxs)(ie.a,{onClick:function(){c(function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem("user"),t({type:T});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),zt.current.disconnect(),u.push("/"),localStorage.removeItem("roomUser")},children:[Object(Y.jsx)(le.a,{children:Object(Y.jsx)(ge.a,{fontSize:"small"})}),"Logout"]})]})]})]})}),Object(Y.jsx)("section",{className:"bg__black",children:Object(Y.jsx)(b.a,{fluid:"lg",children:Object(Y.jsxs)(p.a,{children:[Object(Y.jsxs)(x.a,{md:3,xs:12,style:{height:"calc(100vh - ".concat(Dt.current.offsetHeight+Rt.current.offsetHeight,"px)"),backgroundColor:"#1c2834"},children:[Object(Y.jsx)(ue.a,{square:!0,style:{marginTop:15,borderRadius:7},children:Object(Y.jsxs)(de.a,{value:L,onChange:function(e,t){U(t)},variant:"fullWidth",indicatorColor:"primary",textColor:"primary","aria-label":"icon tabs example",children:[Object(Y.jsx)(je.a,{icon:Object(Y.jsx)(Fe.a,{}),"aria-label":"phone"}),Object(Y.jsx)(je.a,{icon:Object(Y.jsx)(me.a,{badgeContent:n&&n.length,color:"primary",children:Object(Y.jsx)(Ce.a,{})}),"aria-label":"favorite"})]})}),Object(Y.jsx)("div",{className:"search__bar",children:Object(Y.jsxs)(te.a,{className:"py-3",children:[Object(Y.jsx)(te.a.Text,{id:"search",className:"bg-white border-end-0",children:Object(Y.jsx)(ce.a,{})}),Object(Y.jsx)(ne.a,{className:"border-start-0",placeholder:"Username","aria-label":"Username","aria-describedby":"search",value:ve,onChange:function(e){return ye(e.target.value)},type:"text"})]})}),ve&&yt&&Object(Y.jsx)("p",{className:"text-white",children:"Searching..."}),Ke?Object(Y.jsxs)(he.a,{elevation:10,body:!0,className:"bg-dark p-2 d-flex justify-content-between align-items-center mb-3",style:{cursor:"pointer"},children:[Object(Y.jsxs)("div",{className:"d-flex align-items-center",children:[Object(Y.jsx)(N.a,{alt:Ke.name,src:Ke.photo,className:"shadow-lg border"}),Object(Y.jsx)("div",{className:"ps-3 ",children:Object(Y.jsx)("p",{className:"text-white my-0 fs-6 user__name_list",children:Ke.name})})]}),Object(Y.jsx)("div",{children:Object(Y.jsx)(_.a,{onClick:function(){return $t(Ke._id)},children:Object(Y.jsx)(Ce.a,{className:"text-white"})})})]}):yt||!ve||St?null:Object(Y.jsx)("p",{className:"text-white",children:"User is not found"}),1===L&&Object(Y.jsxs)("div",{children:[n&&n.map((function(e){return Object(Y.jsxs)(he.a,{elevation:10,body:!0,className:"bg-dark p-2 d-flex justify-content-between align-items-center mb-3",style:{cursor:"pointer"},children:[Object(Y.jsxs)("div",{className:"d-flex",children:[Object(Y.jsx)(N.a,{alt:"Friend",src:null===e||void 0===e?void 0:e.photo,className:"shadow-lg border"}),Object(Y.jsxs)("div",{className:"ps-3 ",children:[Object(Y.jsx)("p",{className:"text-white my-0 fs-6 user__name_list",children:null===e||void 0===e?void 0:e.name}),Object(Y.jsx)("p",{className:"text-white my-0 last__seen",children:"Wants to be your friend"})]})]}),Object(Y.jsxs)("div",{children:[Object(Y.jsx)(_.a,{onClick:function(){return Xt(null===e||void 0===e?void 0:e._id)},children:Object(Y.jsx)(Ce.a,{className:"text-white"})}),Object(Y.jsx)(_.a,{onClick:function(){return Vt(null===e||void 0===e?void 0:e._id)},children:Object(Y.jsx)(Ue.a,{className:"text-white"})})]})]})})),Ae&&Ae.map((function(e){return Object(Y.jsxs)(he.a,{elevation:10,body:!0,className:"bg-dark p-2 d-flex justify-content-between align-items-center mb-3",style:{cursor:"pointer"},children:[Object(Y.jsxs)("div",{className:"d-flex",children:[Object(Y.jsx)(N.a,{alt:"Friend",src:null===e||void 0===e?void 0:e.photo,className:"shadow-lg border"}),Object(Y.jsxs)("div",{className:"ps-3 ",children:[Object(Y.jsx)("p",{className:"text-white my-0 fs-6 user__name_list",children:null===e||void 0===e?void 0:e.name}),Object(Y.jsx)("p",{className:"text-white my-0 last__seen",children:"Wants to be your friend"})]})]}),Object(Y.jsxs)("div",{children:[Object(Y.jsx)(_.a,{onClick:function(){return Xt(null===e||void 0===e?void 0:e._id)},children:Object(Y.jsx)(Ce.a,{className:"text-white"})}),Object(Y.jsx)(_.a,{onClick:function(){return Vt(null===e||void 0===e?void 0:e._id)},children:Object(Y.jsx)(Ue.a,{className:"text-white"})})]})]})}))]}),S&&!L&&S.map((function(e){return Object(Y.jsx)(lt,{userInfo:e,messages:$,findRoomUser:Gt,setReplyMsgDetails:st,setDisplayMessages:gt,showMobileChat:bt},e.email)}))]}),Object(Y.jsx)(x.a,{md:9,xs:12,className:bt?"bg-primary position-absolute top-0 end-0 bottom-0 start-0":"bg-primary",style:{display:bt&&Ot?"block":bt?"none":"block"},children:Object(Y.jsx)("main",{className:"position-relative h-100",children:(null===G||void 0===G?void 0:G.email)?Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsxs)("section",{className:"message__header d-flex justify-content-between align-items-center py-4 px-2 border-bottom",id:"user__head",children:[Object(Y.jsxs)("div",{className:"d-flex",children:[Object(Y.jsx)(N.a,{alt:null===G||void 0===G?void 0:G.name,src:null===G||void 0===G?void 0:G.photo,style:{height:50,width:50,cursor:"pointer"},onClick:function(){return et(!0)}}),Object(Y.jsxs)("div",{className:"ps-3",children:[Object(Y.jsx)("h4",{className:"text-white my-0",children:null===G||void 0===G?void 0:G.name}),Object(Y.jsx)("p",{className:"text-white my-0",children:(null===G||void 0===G?void 0:G.isActive)?"Online":"Last Seen ".concat(pe()(null===G||void 0===G?void 0:G.updatedAt).calendar())})]})]}),Object(Y.jsx)(_.a,{className:"float-end mobile__back_btn",onClick:function(){return gt(!1)},children:Object(Y.jsx)(Ie.a,{className:"text-white"})})]}),Object(Y.jsx)(fe.a,{className:"message__body overflow-auto position-relative drag__drop",children:s&&s.map((function(t){return Object(Y.jsx)(ot,{messageDetails:t,user:e,roomUser:G,removeFile:Ht,editMsg:Qt,deleteMsg:Yt,replyMsg:Kt},t._id)}))}),Object(Y.jsx)("section",{className:"input__area position-absolute bottom-0 start-0 end-0",id:"text__area",children:Object(Y.jsx)("form",{onSubmit:Wt,className:"mb-2 bg-primary pt-3",children:Object(Y.jsxs)(p.a,{children:[null!==at&&(null===at||void 0===at?void 0:at.message)&&Object(Y.jsx)(x.a,{xs:10,children:Object(Y.jsx)("div",{className:"px-3 py-2 bg-primary position-relative",children:Object(Y.jsxs)("p",{className:"mb-0 col-10 text-truncate text-white",children:[Object(Y.jsx)("b",{children:"Replying to : "}),at.message," ",Object(Y.jsx)(_.a,{className:"position-absolute top-0 end-0",onClick:function(){return st("")},children:Object(Y.jsx)(ke.a,{className:"text-white bg-dark rounded-circle"})})]})})}),Object(Y.jsx)(x.a,{xs:10,children:Object(Y.jsx)(f.a.Group,{controlId:"formBasicEmail",ref:It,children:Object(Y.jsx)(f.a.Control,{value:ee,onChange:function(e){return se(e.target.value)},onKeyPress:function(e){return"Enter"===e.key?Wt(e):se(e.target.value)},ref:Lt,type:"text",as:"textarea",className:"rounded text__input bg-primary text-white",autoComplete:"off"})})}),Object(Y.jsx)(x.a,{xs:1,children:Object(Y.jsxs)("div",{className:"d-flex",children:[Object(Y.jsxs)("label",{htmlFor:"icon-button-file",className:"float-end",children:[Object(Y.jsx)("input",{id:"icon-button-file",type:"file",onChange:Bt,hidden:!0,multiple:!0}),Object(Y.jsx)(_.a,{"aria-label":"upload picture",component:"span",className:"border p-2 input__file__button",children:Object(Y.jsx)(Ne.a,{className:"attachments__icon text-dark"})})]}),Object(Y.jsx)(O.a,{variant:"outline-secondary rounded-circle p-2 pl-3 shadow-lg float-start",className:"ms-2",type:"submit",children:Object(Y.jsx)(we.a,{className:"attachments__icon"})})]})})]})})})]}):Object(Y.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)"},children:Object(Y.jsx)("h4",{className:"text-white",children:"Please Select a conversation"})})})})]})})}),Object(Y.jsx)(g.a,{style:{background:"#000"},className:"nav__bar",ref:Rt,expand:"lg",children:Object(Y.jsxs)(b.a,{fluid:"md",children:[Object(Y.jsxs)(v.a,{className:"me-auto align-items-center py-3 text-white",children:["Copyright ",Object(Y.jsx)(R.a,{className:"me-2"})," ",(new Date).getFullYear()," ","e-Chat-Buddy. All rights reserved."]}),Object(Y.jsx)(v.a,{className:"ms-auto align-items-center py-3 text-white",children:"Designed & Developed By Sazzad Bin Anwar"})]})}),Object(Y.jsxs)(ae.a,{show:He,onHide:function(){return Je(!He)},fullscreen:"md-down",centered:!0,backdrop:"static",className:"shadow-lg",children:[Object(Y.jsx)(ae.a.Header,{children:Object(Y.jsxs)(ae.a.Title,{className:"position-relative w-100",children:["Upload File"," ",Object(Y.jsx)(_.a,{className:"position-absolute top-0 end-0",onClick:function(){return Jt()},children:Object(Y.jsx)(ke.a,{})})]})}),Object(Y.jsx)(ae.a.Body,{children:Object(Y.jsx)(p.a,{style:{maxHeight:450,overflowY:"auto"},children:Ee&&Ee.map((function(e){return Object(Y.jsx)(ut,{fileData:e,removeFile:Ht},e)}))})}),Object(Y.jsxs)(ae.a.Footer,{children:[Object(Y.jsx)(O.a,{variant:"secondary",onClick:function(){return Jt()},children:"Close"}),Object(Y.jsx)(O.a,{variant:"outline-primary",onClick:Wt,children:Object(Y.jsx)(we.a,{className:"fs-7"})})]})]}),Object(Y.jsxs)(ae.a,{show:Ze,onHide:function(){return et(!Ze)},fullscreen:"md-down",centered:!0,className:"shadow-lg w-100",children:[(null===G||void 0===G?void 0:G.photo)?Object(Y.jsx)("img",{alt:null===G||void 0===G?void 0:G.name,src:null===G||void 0===G?void 0:G.photo,height:"auto",width:"auto"}):Object(Y.jsxs)("div",{className:"d-flex flex-column justify-content-center align-items-center  my-5",children:[Object(Y.jsx)("img",{alt:"userphoto",src:"/user.png",className:"rounded-circle bg-dark p-3",height:"150",width:"150"}),Object(Y.jsx)("h3",{className:"my-2",children:null===G||void 0===G?void 0:G.name})]}),Object(Y.jsx)(_.a,{className:"position-absolute top-0 end-0",onClick:function(){return et(!Ze)},children:Object(Y.jsx)(ke.a,{className:"text-white bg-dark"})})]})]})},mt=function(){var e=Object(a.useState)([]),t=Object(h.a)(e,2),n=(t[0],t[1]);console.log("hello");return Object(Y.jsxs)("div",{children:[Object(Y.jsx)("div",{className:"drop-container d-flex justify-content-center align-items-center",onDragOver:function(e){e.preventDefault()},onDragEnter:function(e){e.preventDefault()},onDragLeave:function(e){e.preventDefault()},onDrop:function(e){e.preventDefault();var t=e.dataTransfer.files;t.length&&function(e){n(e),console.log(e)}(t)},style:{height:300,width:300,border:"1px solid black"},children:Object(Y.jsxs)("div",{className:"drop-message",children:[Object(Y.jsx)("div",{className:"upload-icon"}),"Drag and Drop files here or click to upload"]})}),Object(Y.jsx)("div",{className:"files"})]})},ht=function(){return Object(Y.jsxs)(l.d,{children:[Object(Y.jsx)(l.b,{path:"/login",component:ee}),Object(Y.jsx)(l.b,{path:"/test",component:mt}),Object(Y.jsx)(X,{path:"/chat",children:Object(Y.jsx)(jt,{})}),Object(Y.jsx)(l.b,{path:"/not-found",component:K}),Object(Y.jsx)(l.b,{exact:!0,path:"/",component:Q}),Object(Y.jsx)(l.a,{to:"/not-found"})]})},bt=(n(546),n(547),n(548),function(){return Object(Y.jsx)(o.a,{children:Object(Y.jsx)(l.b,{path:"/",component:ht})})}),pt=n(116),xt=n(323),ft=n(324),Ot=Object(pt.combineReducers)({userLogin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return{loading:!0};case L:case F:return{loading:!1,user:t.payload};case A:case U:return{loading:!1,error:t.payload};case T:return{};default:return e}},friends:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z:return{friends:t.payload};case q:return{error:t.payload};default:return e}},friendRequests:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return{friendRequest:t.payload};case M:return{error:t.payload};default:return e}},chat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G:return{chat:t.payload};case W:return{error:t.payload};default:return e}}}),gt=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):{},vt={userLogin:{user:gt.isLoggedIn?gt:{isLoggedIn:!1}}},wt=[ft.a],yt=Object(pt.createStore)(Ot,vt,Object(xt.composeWithDevTools)(pt.applyMiddleware.apply(void 0,wt))),Nt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,599)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),s(e),c(e),r(e)}))},_t=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function kt(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(Object(Y.jsx)(r.a,{store:yt,children:Object(Y.jsx)(i.ToastProvider,{children:Object(Y.jsx)(bt,{})})}),document.getElementById("root")),Nt(),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");_t?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):kt(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):kt(t,e)}))}}()}},[[549,1,2]]]);
//# sourceMappingURL=main.27b002e2.chunk.js.map